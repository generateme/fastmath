<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>fastmath.grid documentation</title><script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Fastmath</span> <span class="project-version">2.1.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1"><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fastmath</span></div></div></li><li class="depth-2 branch"><a href="fastmath.clustering.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clustering</span></div></a></li><li class="depth-2 branch"><a href="fastmath.complex.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>complex</span></div></a></li><li class="depth-2 branch"><a href="fastmath.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="fastmath.distance.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>distance</span></div></a></li><li class="depth-2 branch"><a href="fastmath.easings.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>easings</span></div></a></li><li class="depth-2 branch"><a href="fastmath.fields.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fields</span></div></a></li><li class="depth-2 branch"><a href="fastmath.gp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>gp</span></div></a></li><li class="depth-2 branch current"><a href="fastmath.grid.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>grid</span></div></a></li><li class="depth-2 branch"><a href="fastmath.interpolation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interpolation</span></div></a></li><li class="depth-2 branch"><a href="fastmath.kernel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kernel</span></div></a></li><li class="depth-2"><a href="fastmath.optimization.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>optimization</span></div></a></li><li class="depth-3"><a href="fastmath.optimization.bo.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bo</span></div></a></li><li class="depth-2 branch"><a href="fastmath.protocols.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>protocols</span></div></a></li><li class="depth-2 branch"><a href="fastmath.random.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>random</span></div></a></li><li class="depth-2 branch"><a href="fastmath.signal.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>signal</span></div></a></li><li class="depth-2 branch"><a href="fastmath.stats.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stats</span></div></a></li><li class="depth-2 branch"><a href="fastmath.transform.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>transform</span></div></a></li><li class="depth-2"><a href="fastmath.vector.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>vector</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="fastmath.grid.html#var-cell-.3Eanchor"><div class="inner"><span>cell-&gt;anchor</span></div></a></li><li class="depth-1"><a href="fastmath.grid.html#var-cell-.3Emid"><div class="inner"><span>cell-&gt;mid</span></div></a></li><li class="depth-1"><a href="fastmath.grid.html#var-cell-names"><div class="inner"><span>cell-names</span></div></a></li><li class="depth-1"><a href="fastmath.grid.html#var-coords-.3Eanchor"><div class="inner"><span>coords-&gt;anchor</span></div></a></li><li class="depth-1"><a href="fastmath.grid.html#var-coords-.3Ecell"><div class="inner"><span>coords-&gt;cell</span></div></a></li><li class="depth-1"><a href="fastmath.grid.html#var-coords-.3Emid"><div class="inner"><span>coords-&gt;mid</span></div></a></li><li class="depth-1"><a href="fastmath.grid.html#var-corners"><div class="inner"><span>corners</span></div></a></li><li class="depth-1"><a href="fastmath.grid.html#var-flat-hex-corners"><div class="inner"><span>flat-hex-corners</span></div></a></li><li class="depth-1"><a href="fastmath.grid.html#var-grid"><div class="inner"><span>grid</span></div></a></li><li class="depth-1"><a href="fastmath.grid.html#var-grid-type"><div class="inner"><span>grid-type</span></div></a></li><li class="depth-1"><a href="fastmath.grid.html#var-pointy-hex-corners"><div class="inner"><span>pointy-hex-corners</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">fastmath.grid</h1><div class="doc"><div class="markdown"><p>Grid calculation functions.</p>
<p>Convert 2d coordinates into various grid coordinates and back.</p>
<p>Terms used:</p>
<ul>
  <li>cell type - grid cell shape: square, triangular, hexagonal, rhomboidal</li>
  <li>coords - 2d euclidean coordinates (x,y)</li>
  <li>cell - cell coordinates (q,r)</li>
  <li>anchor - cell position in 2d euclidean space</li>
  <li>corners - shape vertices</li>
  <li>size - size of the cell.</li>
</ul>
<h3><a href="#grids" name="grids"></a>Grids</h3>
<p>Each grid is defined by cell type and size. Optionally you can provide translating vector.</p>
<p>Each cell has itâ€™s own coordinates, mostly axial based (only square has offset).</p>
<p>For hexagonal cell size is a radius from midpoint to corner. For the rest it is the size of the side.</p>
<p>Cell types are:</p>
<ul>
  <li><code>:square</code></li>
  <li><code>:shifted-square</code></li>
  <li><code>:triangle</code></li>
  <li><code>:rhombus</code></li>
  <li><code>:flat-hex</code> - flat topped</li>
  <li><code>:pointy-hex</code> - pointy topped</li>
</ul>
<h3><a href="#notes" name="notes"></a>Notes</h3>
<ul>
  <li>Hexagonal grids are based on <a href="https://www.redblobgames.com/grids/hexagons/">https://www.redblobgames.com/grids/hexagons/</a></li>
  <li>Only hexagonal cells have anchor at the center. For the rest the anchor is at the top left vertex.
    <ul>
      <li>Anchors for triangular grids are shared between two cells: even and odd <code>q</code> coordinate. Even <code>q</code> is pointy topped, odd <code>q</code> is flat topped.</li>
    </ul>
  </li>
</ul></div><div class="markdown"><h4>Categories</h4><ul></ul><p>Other vars: <a href="fastmath.grid.html#var-cell-.3Eanchor">cell-&gt;anchor</a> <a href="fastmath.grid.html#var-cell-.3Emid">cell-&gt;mid</a> <a href="fastmath.grid.html#var-cell-names">cell-names</a> <a href="fastmath.grid.html#var-coords-.3Eanchor">coords-&gt;anchor</a> <a href="fastmath.grid.html#var-coords-.3Ecell">coords-&gt;cell</a> <a href="fastmath.grid.html#var-coords-.3Emid">coords-&gt;mid</a> <a href="fastmath.grid.html#var-corners">corners</a> <a href="fastmath.grid.html#var-flat-hex-corners">flat-hex-corners</a> <a href="fastmath.grid.html#var-grid">grid</a> <a href="fastmath.grid.html#var-grid-type">grid-type</a> <a href="fastmath.grid.html#var-pointy-hex-corners">pointy-hex-corners</a></p></div></div><div class="public anchor" id="var-cell-.3Eanchor"><h3>cell-&gt;anchor</h3><div class="usage"><code>(cell-&gt;anchor g cell)</code></div><div class="doc"><div class="markdown"><p>Converts cell coordinates to anchor coordinates.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(cell-&gt;anchor (grid :triangle 20 10 10) [5 5])
;;=&gt; [100.0 110.0]</code></pre></div><div><blockquote><p>More examples (grid <code>g</code> same as above). For triangle grid pair of cells share the same anchor.</p></blockquote><pre><code class="hljs clojure">(cell-&gt;anchor g [0 0])
;;=&gt; [10.0 10.0]
(cell-&gt;anchor g [1 0])
;;=&gt; [10.0 10.0]
(cell-&gt;anchor g [2 0])
;;=&gt; [30.0 10.0]
(cell-&gt;anchor g [3 0])
;;=&gt; [30.0 10.0]
(cell-&gt;anchor (grid :shifted-square 20 10 10) [5 5])
;;=&gt; [160.0 110.0]</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/grid.clj#L51">view source</a></div></div><div class="public anchor" id="var-cell-.3Emid"><h3>cell-&gt;mid</h3><div class="usage"><code>(cell-&gt;mid g cell)</code></div><div class="doc"><div class="markdown"><p>Converts cell coordinates to mid point</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(cell-&gt;mid (grid :triangle 20 10 10) [5 5])
;;=&gt; [100.0 123.33333333333333]</code></pre></div><div><blockquote><p>More examples (grid <code>g</code> same as above).</p></blockquote><pre><code class="hljs clojure">(cell-&gt;mid g [0 0])
;;=&gt; [10.0 23.333333333333336]
(cell-&gt;mid g [1 0])
;;=&gt; [10.0 23.333333333333336]
(cell-&gt;mid g [2 0])
;;=&gt; [30.0 23.333333333333336]
(cell-&gt;mid g [3 0])
;;=&gt; [30.0 23.333333333333336]
(cell-&gt;mid (grid :shifted-square 20 10 10) [5 5])
;;=&gt; [170.0 120.0]</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/grid.clj#L73">view source</a></div></div><div class="public anchor" id="var-cell-names"><h3>cell-names</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>List of all grid types.</p></blockquote><pre><code class="hljs clojure">cell-names
;;=&gt; [:square :shifted-square :triangle :rhombus :flat-hex :pointy-hex]</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/grid.clj#L310">view source</a></div></div><div class="public anchor" id="var-coords-.3Eanchor"><h3>coords-&gt;anchor</h3><div class="usage"><code>(coords-&gt;anchor g coords)</code></div><div class="doc"><div class="markdown"><p>Converts 2d coordinates to cell anchor.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(coords-&gt;anchor (grid :rhombus) [105 105])
;;=&gt; [100.0 100.0]
(coords-&gt;anchor (grid :rhombus) [100 100])
;;=&gt; [100.0 100.0]
(coords-&gt;anchor (grid :rhombus) [99 99])
;;=&gt; [95.0 90.0]</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/grid.clj#L68">view source</a></div></div><div class="public anchor" id="var-coords-.3Ecell"><h3>coords-&gt;cell</h3><div class="usage"><code>(coords-&gt;cell g coords)</code></div><div class="doc"><div class="markdown"><p>Converts 2d space coordinates to cell coordinates.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(coords-&gt;cell (grid :pointy-hex 20 10 10) [50 50])
;;=&gt; [1.0 3.0]</code></pre></div><div><blockquote><p>More examples (grid <code>g</code> same as above)</p></blockquote><pre><code class="hljs clojure">(coords-&gt;cell g [0 0])
;;=&gt; [0.0 -1.0]
(coords-&gt;cell g [100 100])
;;=&gt; [2.0 6.0]
(coords-&gt;cell g [-150 -150])
;;=&gt; [-4.0 -11.0]</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/grid.clj#L47">view source</a></div></div><div class="public anchor" id="var-coords-.3Emid"><h3>coords-&gt;mid</h3><div class="usage"><code>(coords-&gt;mid g coords)</code></div><div class="doc"><div class="markdown"><p>Converts 2d space into cell midpoint.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(coords-&gt;mid (grid :pointy-hex 20 10 10) [50 50])
;;=&gt; [53.301270189221924 55.0]</code></pre></div><div><blockquote><p>More examples (grid <code>g</code> same as above)</p></blockquote><pre><code class="hljs clojure">(coords-&gt;mid g [0 0])
;;=&gt; [1.3397459621556145 -5.0]
(coords-&gt;mid g [100 100])
;;=&gt; [96.60254037844385 100.0]
(coords-&gt;mid g [-150 -150])
;;=&gt; [-154.54482671904333 -155.0]</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/grid.clj#L55">view source</a></div></div><div class="public anchor" id="var-corners"><h3>corners</h3><div class="usage"><code>(corners g coords)</code><code>(corners g coords scale)</code></div><div class="doc"><div class="markdown"><p>Returns list of cell vertices for given 2d space coordinates.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(corners (grid :flat-hex 20) [100 100])
;;=&gt; ([115.0 95.26279441628824]
;;=&gt;  [110.0 103.92304845413263]
;;=&gt;  [100.0 103.92304845413264]
;;=&gt;  [95.0 95.26279441628824]
;;=&gt;  [100.0 86.60254037844386]
;;=&gt;  [110.0 86.60254037844386])
(corners (grid :triangle 10 10 10) [100 100])
;;=&gt; [[95.0 100.0] [105.0 100.0] [100.0 110.0]]</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/grid.clj#L63">view source</a></div></div><div class="public anchor" id="var-flat-hex-corners"><h3>flat-hex-corners</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Function which returns vertices for flat topped hexagon for given size and coordinates.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Generate vertices for flat topped hexagon for given position and size</p></blockquote><pre><code class="hljs clojure">(flat-hex-corners 100 [15 15])
;;=&gt; ([115.0 15.0]
;;=&gt;  [65.0 101.60254037844386]
;;=&gt;  [-34.999999999999986 101.60254037844388]
;;=&gt;  [-85.0 15.000000000000012]
;;=&gt;  [-35.000000000000064 -71.60254037844382]
;;=&gt;  [65.0 -71.60254037844386])
(flat-hex-corners 1 [0 0])
;;=&gt; ([1.0 0.0]
;;=&gt;  [0.5 0.8660254037844386]
;;=&gt;  [-0.49999999999999983 0.8660254037844388]
;;=&gt;  [-1.0 1.224646799076922E-16]
;;=&gt;  [-0.5000000000000007 -0.8660254037844383]
;;=&gt;  [0.5 -0.8660254037844386])
(flat-hex-corners 100 0 0)
;;=&gt; ([100.0 0.0]
;;=&gt;  [50.0 86.60254037844386]
;;=&gt;  [-49.999999999999986 86.60254037844388]
;;=&gt;  [-100.0 1.224646799076922E-14]
;;=&gt;  [-50.000000000000064 -86.60254037844382]
;;=&gt;  [50.0 -86.60254037844386])</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/grid.clj#L189">view source</a></div></div><div class="public anchor" id="var-grid"><h3>grid</h3><div class="usage"><code>(grid type size sx sy)</code><code>(grid type size)</code><code>(grid type)</code><code>(grid)</code></div><div class="doc"><div class="markdown"><p>Create grid for given type, size and optional translating vector.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(grid :pointy-hex 20)
;;=&gt; pointy-hex, size=10.0
(grid :triangular 10 5.0 5.0)
;;=&gt; triangular, size=10.0
(name (grid :square))
;;=&gt; square
(str (grid :rhombus))
;;=&gt; rhombus, size=10.0
(grid)
;;=&gt; square, size=10.0</code></pre></div><div><blockquote><p>Pointy hex (red dot: mid point, cyan circle: anchor)</p></blockquote><img src="images/g/pointy-hex.jpg" /></div><div><blockquote><p>Flat hex (red dot: mid point, cyan circle: anchor)</p></blockquote><img src="images/g/flat-hex.jpg" /></div><div><blockquote><p>Rhombus (red dot: mid point, cyan circle: anchor)</p></blockquote><img src="images/g/rhombus.jpg" /></div><div><blockquote><p>Triangle (red dot: mid point, cyan circle: anchor)</p></blockquote><img src="images/g/triangle.jpg" /></div><div><blockquote><p>Square (red dot: mid point, cyan circle: anchor)</p></blockquote><img src="images/g/square.jpg" /></div><div><blockquote><p>Shifted square (red dot: mid point, cyan circle: anchor)</p></blockquote><img src="images/g/shifted-square.jpg" /></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/grid.clj#L298">view source</a></div></div><div class="public anchor" id="var-grid-type"><h3>grid-type</h3><div class="usage"><code>(grid-type g)</code></div><div class="doc"><div class="markdown"><p>Returns type of the cell.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(grid-type (grid :flat-hex 10))
;;=&gt; :flat-hex</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/grid.clj#L59">view source</a></div></div><div class="public anchor" id="var-pointy-hex-corners"><h3>pointy-hex-corners</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Function which returns vertices for pointy topped hexagon for given size and coordinates.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Generate vertices for pointy topped hexagon for given position and size</p></blockquote><pre><code class="hljs clojure">(pointy-hex-corners 100 [15 15])
;;=&gt; ([101.60254037844388 64.99999999999999]
;;=&gt;  [15.000000000000005 115.0]
;;=&gt;  [-71.60254037844386 65.00000000000001]
;;=&gt;  [-71.60254037844386 -35.000000000000014]
;;=&gt;  [14.999999999999982 -85.0]
;;=&gt;  [101.60254037844382 -35.000000000000064])
(pointy-hex-corners 1 [0 0])
;;=&gt; ([0.8660254037844387 0.4999999999999999]
;;=&gt;  [6.12323399538461E-17 1.0]
;;=&gt;  [-0.8660254037844386 0.5000000000000001]
;;=&gt;  [-0.8660254037844386 -0.5000000000000001]
;;=&gt;  [-1.83697019874463E-16 -1.0]
;;=&gt;  [0.8660254037844382 -0.5000000000000007])
(pointy-hex-corners 100 0 0)
;;=&gt; ([86.60254037844388 49.999999999999986]
;;=&gt;  [6.12323399538461E-15 100.0]
;;=&gt;  [-86.60254037844386 50.000000000000014]
;;=&gt;  [-86.60254037844386 -50.000000000000014]
;;=&gt;  [-1.83697019874463E-14 -100.0]
;;=&gt;  [86.60254037844382 -50.000000000000064])</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/grid.clj#L187">view source</a></div></div></div></body></html>