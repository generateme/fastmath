<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>fastmath.signal documentation</title><script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Fastmath</span> <span class="project-version">1.5.0-alpha4</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1"><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fastmath</span></div></div></li><li class="depth-2 branch"><a href="fastmath.classification.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>classification</span></div></a></li><li class="depth-2 branch"><a href="fastmath.clustering.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clustering</span></div></a></li><li class="depth-2 branch"><a href="fastmath.complex.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>complex</span></div></a></li><li class="depth-2 branch"><a href="fastmath.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="fastmath.distance.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>distance</span></div></a></li><li class="depth-2 branch"><a href="fastmath.easings.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>easings</span></div></a></li><li class="depth-2 branch"><a href="fastmath.fields.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fields</span></div></a></li><li class="depth-2 branch"><a href="fastmath.grid.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>grid</span></div></a></li><li class="depth-2 branch"><a href="fastmath.interpolation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interpolation</span></div></a></li><li class="depth-2 branch"><a href="fastmath.kernel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kernel</span></div></a></li><li class="depth-2 branch"><a href="fastmath.optimization.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>optimization</span></div></a></li><li class="depth-2 branch"><a href="fastmath.protocols.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>protocols</span></div></a></li><li class="depth-2 branch"><a href="fastmath.random.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>random</span></div></a></li><li class="depth-2 branch"><a href="fastmath.regression.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>regression</span></div></a></li><li class="depth-2 branch current"><a href="fastmath.signal.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>signal</span></div></a></li><li class="depth-2 branch"><a href="fastmath.stats.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stats</span></div></a></li><li class="depth-2 branch"><a href="fastmath.transform.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>transform</span></div></a></li><li class="depth-2"><a href="fastmath.vector.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>vector</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="fastmath.signal.html#var-apply-effects"><div class="inner"><span>apply-effects</span></div></a></li><li class="depth-1"><a href="fastmath.signal.html#var-apply-effects-raw"><div class="inner"><span>apply-effects-raw</span></div></a></li><li class="depth-1"><a href="fastmath.signal.html#var-compose-effects"><div class="inner"><span>compose-effects</span></div></a></li><li class="depth-1"><a href="fastmath.signal.html#var-db-.3Elinear"><div class="inner"><span>db-&gt;linear</span></div></a></li><li class="depth-1"><a href="fastmath.signal.html#var-effect"><div class="inner"><span>effect</span></div></a></li><li class="depth-1"><a href="fastmath.signal.html#var-effects-list"><div class="inner"><span>effects-list</span></div></a></li><li class="depth-1"><a href="fastmath.signal.html#var-linear-.3Edb"><div class="inner"><span>linear-&gt;db</span></div></a></li><li class="depth-1"><a href="fastmath.signal.html#var-load-signal"><div class="inner"><span>load-signal</span></div></a></li><li class="depth-1"><a href="fastmath.signal.html#var-oscillator"><div class="inner"><span>oscillator</span></div></a></li><li class="depth-1"><a href="fastmath.signal.html#var-oscillator-.3Esignal"><div class="inner"><span>oscillator-&gt;signal</span></div></a></li><li class="depth-1"><a href="fastmath.signal.html#var-oscillator-gain"><div class="inner"><span>oscillator-gain</span></div></a></li><li class="depth-1"><a href="fastmath.signal.html#var-oscillators"><div class="inner"><span>oscillators</span></div></a></li><li class="depth-1"><a href="fastmath.signal.html#var-oscillators-sum"><div class="inner"><span>oscillators-sum</span></div></a></li><li class="depth-1"><a href="fastmath.signal.html#var-save-signal"><div class="inner"><span>save-signal</span></div></a></li><li class="depth-1"><a href="fastmath.signal.html#var-signal-.3Eoscillator"><div class="inner"><span>signal-&gt;oscillator</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">fastmath.signal</h1><div class="doc"><div class="markdown"><p>Signal processing (effect) and generation (oscillators).</p>
<p>Singal is any sequence with double values.</p>
<h2><a href="#signal-processing" name="signal-processing"></a>Signal processing</h2>
<p>To process signal use <a href="fastmath.signal.html#var-apply-effects">apply-effects</a> or <a href="fastmath.signal.html#var-apply-effects-raw">apply-effects-raw</a> (operates on <code>double-array</code> only) function.</p>
<p>Effect is signal filter, created by <a href="fastmath.signal.html#var-effect">effect</a> multimethod. Effects can be composed with <a href="fastmath.signal.html#var-compose-effects">compose-effects</a>. Effect can be treated as function and can be called for given sample.</p>
<p>Each effect has it’s own parametrization which should be passed during creation.</p>
<p>List of all available effects is under <a href="fastmath.signal.html#var-effects-list">effects-list</a> value.</p>
<h3><a href="#effects-parametrization" name="effects-parametrization"></a>Effects parametrization</h3>
<p>Each effect has its own parameters.</p>
<h4><a href="#simple-lowpass-simple-highpass" name="simple-lowpass-simple-highpass"></a>:simple-lowpass, :simple-highpass</h4>
<ul>
  <li><code>:rate</code> - sample rate (default 44100.0)</li>
  <li><code>:cutoff</code> - cutoff frequency (default 2000.0)</li>
</ul>
<h4><a href="#biquad-eq" name="biquad-eq"></a>:biquad-eq</h4>
<p>Biquad equalizer</p>
<ul>
  <li><code>:fc</code> - center frequency</li>
  <li><code>:gain</code> - gain</li>
  <li><code>:bw</code> - bandwidth (default: 1.0)</li>
  <li><code>:fs</code> - sampling rate (defatult: 44100.0)</li>
</ul>
<h4><a href="#biquad-hs-biquad-ls" name="biquad-hs-biquad-ls"></a>:biquad-hs, :biquad-ls</h4>
<p>Biquad highpass and lowpass shelf filters</p>
<ul>
  <li><code>:fc</code> - center frequency</li>
  <li><code>:gain</code> - gain</li>
  <li><code>:slope</code> - shelf slope (default 1.5)</li>
  <li><code>:fs</code> - sampling rate (default 44100.0)</li>
</ul>
<h4><a href="#biquad-lp-biquad-hp-biquad-bp" name="biquad-lp-biquad-hp-biquad-bp"></a>:biquad-lp, :biquad-hp, :biquad-bp</h4>
<p>Biquad lowpass, highpass and bandpass filters</p>
<ul>
  <li><code>:fc</code> - cutoff/center frequency</li>
  <li><code>:bw</code> - bandwidth (default 1.0)</li>
  <li><code>:fs</code> - sampling rate (default 44100.0)</li>
</ul>
<h4><a href="#dj-eq" name="dj-eq"></a>:dj-eq</h4>
<ul>
  <li><code>:high</code> - high frequency gain (10000Hz)</li>
  <li><code>:mid</code> - mid frequency gain (1000Hz)</li>
  <li><code>:low</code> - low frequency gain (100Hz)</li>
  <li><code>:shelf-slope</code> - shelf slope for high frequency (default 1.5)</li>
  <li><code>:peak-bw</code> - peak bandwidth for mid and low frequencies (default 1.0)</li>
  <li><code>:rate</code> - sampling rate (default 44100.0)</li>
</ul>
<h4><a href="#phaser-allpass" name="phaser-allpass"></a>:phaser-allpass</h4>
<ul>
  <li><code>:delay</code> - delay factor (default: 0.5)</li>
</ul>
<h4><a href="#divider" name="divider"></a>:divider</h4>
<ul>
  <li><code>:denom</code> (long, default 2.0)</li>
</ul>
<h4><a href="#fm" name="fm"></a>:fm</h4>
<p>Modulate and demodulate signal using frequency</p>
<ul>
  <li><code>:quant</code> - quantization value (0.0 - if no quantization, default 10)</li>
  <li><code>:omega</code> - carrier factor (default 0.014)</li>
  <li><code>:phase</code> - deviation factor (default 0.00822)</li>
</ul>
<h4><a href="#bandwidth-limit" name="bandwidth-limit"></a>:bandwidth-limit</h4>
<p><a href="https://searchcode.com/file/18573523/cmt/src/lofi.cpp#">https://searchcode.com/file/18573523/cmt/src/lofi.cpp#</a></p>
<ul>
  <li><code>:rate</code> - sample rate (default 44100.0)</li>
  <li><code>:freq</code> - cutoff frequency (default 1000.0)</li>
</ul>
<h4><a href="#distort" name="distort"></a>:distort</h4>
<ul>
  <li><code>:factor</code> - distortion factor (default 1.0)</li>
</ul>
<h4><a href="#foverdrive" name="foverdrive"></a>:foverdrive</h4>
<p>Fast overdrive</p>
<ul>
  <li><code>:drive</code> - drive (default 2.0)</li>
</ul>
<h4><a href="#decimator" name="decimator"></a>:decimator</h4>
<ul>
  <li><code>:bits</code> - bit depth (default 2)</li>
  <li><code>:fs</code> - decimator sample rate (default 4410.0)</li>
  <li><code>:rate</code> - input sample rate (default 44100.0)</li>
</ul>
<h4><a href="#basstreble" name="basstreble"></a>:basstreble</h4>
<ul>
  <li><code>:bass</code> - bass gain (default 1.0)</li>
  <li><code>:treble</code> - treble gain (default 1.0)</li>
  <li><code>:gain</code> - gain (default 0.0)</li>
  <li><code>:rate</code> - sample rate (default 44100.0)</li>
  <li><code>:slope</code> - slope for both (default 0.4)</li>
  <li><code>:bass-freq</code> - bass freq (default 250.0)</li>
  <li><code>:treble-freq</code> - treble freq (default 4000.0)</li>
</ul>
<h4><a href="#echo" name="echo"></a>:echo</h4>
<ul>
  <li><code>:delay</code> - delay time in seconds (default 0.5)</li>
  <li><code>:decay</code> - decay (amount echo in signal, default 0.5)</li>
  <li><code>:rate</code> - sample rate (default 44100.0)</li>
</ul>
<p><em>Warning! Echo filter uses mutable array as a internal state, don’t use the same filter in paraller processing.</em></p>
<h4><a href="#vcf303" name="vcf303"></a>:vcf303</h4>
<ul>
  <li><code>:rate</code> - sample rate (default 44100.0)</li>
  <li><code>:trigger</code> - boolean, trigger some action (default <code>false</code>), set true when you reset filter every line</li>
  <li><code>:cutoff</code> - cutoff frequency (values 0-1, default 0.8)</li>
  <li><code>:resonance</code> - resonance (values 0-1, default 0.8)</li>
  <li><code>:env-mod</code> - envelope modulation (values 0-1, default 0.5)</li>
  <li><code>:decay</code> - decay (values 0-1, default 1.0)</li>
  <li><code>:gain</code> - gain output signal (default: 1.0)</li>
</ul>
<h4><a href="#slew-limit" name="slew-limit"></a>:slew-limit</h4>
<p><a href="http://git.drobilla.net/cgit.cgi/omins.lv2.git/tree/src/slew_limiter.c">http://git.drobilla.net/cgit.cgi/omins.lv2.git/tree/src/slew_limiter.c</a></p>
<ul>
  <li><code>:rate</code> - sample rate</li>
  <li><code>:maxrise</code> - maximum change for rising signal (in terms of 1/rate steps, default 500)</li>
  <li><code>:maxfall</code> - maximum change for falling singal (default 500)</li>
</ul>
<h4><a href="#mda-thru-zero" name="mda-thru-zero"></a>:mda-thru-zero</h4>
<ul>
  <li><code>:rate</code> - sample rate</li>
  <li><code>:speed</code> - effect rate</li>
  <li><code>:depth</code></li>
  <li><code>:mix</code></li>
  <li><code>:depth-mod</code></li>
  <li><code>:feedback</code></li>
</ul>
<p><em>Warning: internal state is kept in doubles array.</em></p>
<h2><a href="#oscillators" name="oscillators"></a>Oscillators</h2>
<p><a href="fastmath.signal.html#var-oscillator">oscillator</a> creates function which generates signal value for given time.</p>
<p>To sample generated wave to signal, call <a href="fastmath.signal.html#var-oscillator-.3Esignal">oscillator-&gt;signal</a> with following parameters:</p>
<ul>
  <li><code>f</code> - oscillator</li>
  <li><code>samplerate</code> - sample rate (samples per second)</li>
  <li><code>seconds</code> - duration</li>
</ul>
<p>To convert signal to oscillator (using interpolation) use <a href="fastmath.signal.html#var-signal-.3Eoscillator">signal-&gt;oscillator</a> passing signal and duration.</p>
<p>Add oscillators using <a href="fastmath.signal.html#var-oscillators-sum">oscillators-sum</a>.</p>
<h2><a href="#file-operations" name="file-operations"></a>File operations</h2>
<p>You can <a href="fastmath.signal.html#var-save-signal">save-signal</a> or <a href="fastmath.signal.html#var-load-signal">load-signal</a>. Representation is 16 bit signed, big endian. Use Audacity or SoX to convert to/from audio files.</p></div><div class="markdown"><h4>Categories</h4><ul><li>Effects: <a href="fastmath.signal.html#var-apply-effects">apply-effects</a> <a href="fastmath.signal.html#var-apply-effects-raw">apply-effects-raw</a> <a href="fastmath.signal.html#var-compose-effects">compose-effects</a> <a href="fastmath.signal.html#var-effect">effect</a> <a href="fastmath.signal.html#var-effects-list">effects-list</a></li><li>oscillator: <a href="fastmath.signal.html#var-oscillator">oscillator</a> <a href="fastmath.signal.html#var-oscillator-.3Esignal">oscillator-&gt;signal</a> <a href="fastmath.signal.html#var-oscillator-gain">oscillator-gain</a> <a href="fastmath.signal.html#var-oscillators">oscillators</a> <a href="fastmath.signal.html#var-oscillators-sum">oscillators-sum</a> <a href="fastmath.signal.html#var-signal-.3Eoscillator">signal-&gt;oscillator</a></li><li>Signal: <a href="fastmath.signal.html#var-load-signal">load-signal</a> <a href="fastmath.signal.html#var-save-signal">save-signal</a></li></ul><p>Other vars: <a>-&gt;BiquadConf</a> <a>-&gt;EffectsList</a> <a>-&gt;SampleAndState</a> <a>-&gt;StateBassTreble</a> <a>-&gt;StateBiquad</a> <a>-&gt;StateDecimator</a> <a>-&gt;StateDivider</a> <a>-&gt;StateEcho</a> <a>-&gt;StateFm</a> <a>-&gt;StateMdaThruZero</a> <a>-&gt;StateVcf303</a> <a href="fastmath.signal.html#var-db-.3Elinear">db-&gt;linear</a> <a href="fastmath.signal.html#var-linear-.3Edb">linear-&gt;db</a></p></div></div><div class="public anchor" id="var-apply-effects"><h3>apply-effects</h3><div class="usage"><code>(apply-effects in effects reset)</code><code>(apply-effects in effects)</code></div><div class="doc"><div class="markdown"><p>Apply effects to signal as any sequence.</p>
<p>If <code>reset</code> is positive, reinit state each <code>reset</code> number of samples.</p>
<p>Returns new signal.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(let [lpf (effect :simple-lowpass {:cutoff 10000})
      sgnal [-1.0 1.0 -0.5 0.5 -0.1 0.1 0 0]]
  (apply-effects sgnal lpf))
;;=&gt; (-0.5875878072514978
;;=&gt;  0.34525943123062336
;;=&gt;  -0.15140470452482685
;;=&gt;  0.23135275744022601
;;=&gt;  0.03665391726918618
;;=&gt;  0.07387530311895704
;;=&gt;  0.030467075749249332
;;=&gt;  0.012564993516382631)</code></pre></div><div><blockquote><p>Reset state every two samples</p></blockquote><pre><code class="hljs clojure">(let [lpf (effect :simple-lowpass {:cutoff 10000})
      sgnal [-1.0 1.0 -0.5 0.5 -0.1 0.1 0 0]]
  (apply-effects sgnal lpf 2))
;;=&gt; (-0.5875878072514978
;;=&gt;  0.34525943123062336
;;=&gt;  -0.2937939036257489
;;=&gt;  0.17262971561531168
;;=&gt;  -0.058758780725149784
;;=&gt;  0.034525943123062335
;;=&gt;  0.0
;;=&gt;  0.0)</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/signal.clj#L257">view source</a></div></div><div class="public anchor" id="var-apply-effects-raw"><h3>apply-effects-raw</h3><div class="usage"><code>(apply-effects-raw in effects reset)</code><code>(apply-effects-raw in effects)</code></div><div class="doc"><div class="markdown"><p>Apply effects to signal as <code>double-array</code>.</p>
<p>If <code>reset</code> is positive, reinit state each <code>reset</code> number of samples.</p>
<p>Returns new signal as <code>double-array</code>.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(let [lpf (effect :simple-lowpass {:cutoff 10000})
      sgnal (m/seq-&gt;double-array [-1.0 1.0 -0.5 0.5 -0.1 0.1 0 0])]
  (apply-effects-raw sgnal lpf))
;;=&gt; [D@741d4ff5</code></pre></div><div><blockquote><p>Reset state every two samples</p></blockquote><pre><code class="hljs clojure">(let [lpf (effect :simple-lowpass {:cutoff 10000})
      sgnal (m/seq-&gt;double-array [-1.0 1.0 -0.5 0.5 -0.1 0.1 0 0])]
  (seq (apply-effects-raw sgnal lpf 2)))
;;=&gt; (-0.5875878072514978
;;=&gt;  0.34525943123062336
;;=&gt;  -0.2937939036257489
;;=&gt;  0.17262971561531168
;;=&gt;  -0.058758780725149784
;;=&gt;  0.034525943123062335
;;=&gt;  0.0
;;=&gt;  0.0)</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/signal.clj#L233">view source</a></div></div><div class="public anchor" id="var-compose-effects"><h3>compose-effects</h3><div class="usage"><code>(compose-effects e &amp; es)</code></div><div class="doc"><div class="markdown"><p>Compose effects.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(let [lpf (effect :simple-lowpass)
      hpf (effect :simple-highpass {:cutoff 2000.0})
      composed (compose-effects lpf hpf)
      result (composed 0.5)]
  {"Composed effects" composed,
   "After call on sample" result,
   "Extracted sample" (result)})
;;=&gt; {"After call on sample"
;;=&gt;  #object[fastmath.signal.EffectsList 0x408c030b "simple-highpass (0.38911967999610275) -&gt; simple-lowpass (0.08629142927556396)"],
;;=&gt;  "Composed effects"
;;=&gt;  #object[fastmath.signal.EffectsList 0x2a88880d "simple-highpass (0.0) -&gt; simple-lowpass (0.0)"],
;;=&gt;  "Extracted sample" 0.08629142927556396}</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/signal.clj#L211">view source</a></div></div><div class="public anchor" id="var-db-.3Elinear"><h3>db-&gt;linear</h3><div class="usage"><code>(db-&gt;linear x)</code></div><div class="doc"><div class="markdown"><p>DB to Linear</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(db-&gt;linear 0.5)
;;=&gt; 1.0592537251772889</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/signal.clj#L269">view source</a></div></div><div class="public anchor" id="var-effect"><h3>effect</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Create effect for given name (as keyword) and optional parameters.</p>
<p>List of all possible effects is under <a href="fastmath.signal.html#var-effects-list">effects-list</a>.</p>
<p>Effect is a custom type which contains: name, sample (result of last call), effect function and current state.</p>
<p>Effect can be considered as function: call with sample to effect with next state or call without parameter to obtain latest result. Effects are also composable with <a href="fastmath.signal.html#var-compose-effects">compose-effects</a>.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Basic usage</p></blockquote><pre><code class="hljs clojure">(effect :fm)
;;=&gt; fm (0.0)
(effect :fm {:quant 5})
;;=&gt; fm (0.0)</code></pre></div><div><blockquote><p>Use as a function</p></blockquote><pre><code class="hljs clojure">(let [fm (effect :fm)] (fm 0.5))
;;=&gt; fm (-0.6932861325171887)</code></pre></div><div><blockquote><p>Extract last result.</p></blockquote><pre><code class="hljs clojure">(let [fm (effect :fm) result (fm 0.5)] (result))
;;=&gt; -0.6932861325171887</code></pre></div><div><blockquote><p>Plot of bandwidth-limit</p></blockquote><img src="images/s/bandwidth-limit.jpg" /></div><div><blockquote><p>Plot of basstreble</p></blockquote><img src="images/s/basstreble.jpg" /></div><div><blockquote><p>Plot of biquad-bp</p></blockquote><img src="images/s/biquad-bp.jpg" /></div><div><blockquote><p>Plot of biquad-eq</p></blockquote><img src="images/s/biquad-eq.jpg" /></div><div><blockquote><p>Plot of biquad-hp</p></blockquote><img src="images/s/biquad-hp.jpg" /></div><div><blockquote><p>Plot of biquad-hs</p></blockquote><img src="images/s/biquad-hs.jpg" /></div><div><blockquote><p>Plot of biquad-lp</p></blockquote><img src="images/s/biquad-lp.jpg" /></div><div><blockquote><p>Plot of biquad-ls</p></blockquote><img src="images/s/biquad-ls.jpg" /></div><div><blockquote><p>Plot of decimator</p></blockquote><img src="images/s/decimator.jpg" /></div><div><blockquote><p>Plot of distort</p></blockquote><img src="images/s/distort.jpg" /></div><div><blockquote><p>Plot of divider</p></blockquote><img src="images/s/divider.jpg" /></div><div><blockquote><p>Plot of dj-eq</p></blockquote><img src="images/s/dj-eq.jpg" /></div><div><blockquote><p>Plot of echo</p></blockquote><img src="images/s/echo.jpg" /></div><div><blockquote><p>Plot of fm</p></blockquote><img src="images/s/fm.jpg" /></div><div><blockquote><p>Plot of foverdrive</p></blockquote><img src="images/s/foverdrive.jpg" /></div><div><blockquote><p>Plot of mda-thru-zero</p></blockquote><img src="images/s/mda-thru-zero.jpg" /></div><div><blockquote><p>Plot of phaser-allpass</p></blockquote><img src="images/s/phaser-allpass.jpg" /></div><div><blockquote><p>Plot of simple-highpass</p></blockquote><img src="images/s/simple-highpass.jpg" /></div><div><blockquote><p>Plot of simple-lowpass</p></blockquote><img src="images/s/simple-lowpass.jpg" /></div><div><blockquote><p>Plot of slew-limit</p></blockquote><img src="images/s/slew-limit.jpg" /></div><div><blockquote><p>Plot of vcf303</p></blockquote><img src="images/s/vcf303.jpg" /></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/signal.clj#L281">view source</a></div></div><div class="public anchor" id="var-effects-list"><h3>effects-list</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>List of effects.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>List of all effects</p></blockquote><pre><code class="hljs clojure">effects-list
;;=&gt; (:bandwidth-limit :basstreble :biquad-bp
;;=&gt;                   :biquad-eq :biquad-hp
;;=&gt;                   :biquad-hs :biquad-lp
;;=&gt;                   :biquad-ls :decimator
;;=&gt;                   :distort :divider
;;=&gt;                   :dj-eq :echo
;;=&gt;                   :fm :foverdrive
;;=&gt;                   :mda-thru-zero :phaser-allpass
;;=&gt;                   :simple-highpass :simple-lowpass
;;=&gt;                   :slew-limit :vcf303)</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/signal.clj#L833">view source</a></div></div><div class="public anchor" id="var-linear-.3Edb"><h3>linear-&gt;db</h3><div class="usage"><code>(linear-&gt;db x)</code></div><div class="doc"><div class="markdown"><p>Linear to DB</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(linear-&gt;db 0.5)
;;=&gt; -6.020599913279624</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/signal.clj#L274">view source</a></div></div><div class="public anchor" id="var-load-signal"><h3>load-signal</h3><div class="usage"><code>(load-signal filename)</code></div><div class="doc"><div class="markdown"><p>Read signal from file</p>
<p>Expected representation is 16 bit signed, big endian file.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(let [s (oscillator-&gt;signal (oscillator :sin 1 1 0) 11050 5)]
  (save-signal s "signal.raw")
  {:out (nth (load-signal "signal.raw") 20), :in (nth s 20)})
;;=&gt; {:in 0.011372035973350892, :out 0.011367971313038794}</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/signal.clj#L856">view source</a></div></div><div class="public anchor" id="var-oscillator"><h3>oscillator</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Create oscillator.</p>
<p>Parameters are:</p>
<ul>
  <li>oscilator name (see <code>oscillators</code> variable)</li>
  <li>frequency</li>
  <li>amplitude</li>
  <li>phase (0-1)</li>
</ul>
<p>Multimethod creates oscillator function accepting <code>double</code> (as time) and returns <code>double</code> from [-1.0 1.0] range.</p>
<p>To convert <code>oscillator</code> to signal, call <a href="null">signal-from-oscillator</a>.</p>
<p>To add oscillators, call <a href="null">sum-oscillators</a>.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(let [wave-sin (oscillator :sin 1.0 1.0 0.5)] (wave-sin 0.1))
;;=&gt; -0.5877852522924728
(let [wave-noise (oscillator :triangle 0.1 1.0 0.123)] (wave-noise 0.1))
;;=&gt; 0.9108</code></pre></div><div><blockquote><p>Plot of triangle</p></blockquote><img src="images/s/triangle.jpg" /></div><div><blockquote><p>Plot of noise</p></blockquote><img src="images/s/noise.jpg" /></div><div><blockquote><p>Plot of square</p></blockquote><img src="images/s/square.jpg" /></div><div><blockquote><p>Plot of sin</p></blockquote><img src="images/s/sin.jpg" /></div><div><blockquote><p>Plot of cut-triangle</p></blockquote><img src="images/s/cut-triangle.jpg" /></div><div><blockquote><p>Plot of saw</p></blockquote><img src="images/s/saw.jpg" /></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/signal.clj#L885">view source</a></div></div><div class="public anchor" id="var-oscillator-.3Esignal"><h3>oscillator-&gt;signal</h3><div class="usage"><code>(oscillator-&gt;signal f samplerate seconds)</code></div><div class="doc"><div class="markdown"><p>Create signal from oscillator.</p>
<p>Parameters are:</p>
<ul>
  <li>f - oscillator</li>
  <li>samplerate - in Hz</li>
  <li>seconds - duration</li>
</ul>
<p>Returns sampled signal as double array.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(let [w (oscillator :sin 0.2 0.9 0.2)] (oscillator-&gt;signal w 44100 5))
;;=&gt; [D@5bd5ed6</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/signal.clj#L957">view source</a></div></div><div class="public anchor" id="var-oscillator-gain"><h3>oscillator-gain</h3><div class="usage"><code>(oscillator-gain fs gain)</code></div><div class="doc"><div class="markdown"></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(let [wave-sin (oscillator :sin 1.0 1.0 0.5)
      gained (oscillator-gain wave-sin 0.22)]
  {:original (wave-sin 0.75), :gained (gained 0.75)})
;;=&gt; {:gained 0.22, :original 1.0}</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/signal.clj#L951">view source</a></div></div><div class="public anchor" id="var-oscillators"><h3>oscillators</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>List of oscillator names used with <a href="fastmath.signal.html#var-oscillator">oscillator</a></p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>List of oscillators</p></blockquote><pre><code class="hljs clojure">oscillators
;;=&gt; (:constant :cut-triangle :noise :saw :sin :square :triangle)</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/signal.clj#L941">view source</a></div></div><div class="public anchor" id="var-oscillators-sum"><h3>oscillators-sum</h3><div class="usage"><code>(oscillators-sum &amp; fs)</code></div><div class="doc"><div class="markdown"><p>Create oscillator which is sum of all oscillators.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(let [w1 (oscillator :triangle 1.5 0.5 0.5)
      w2 (oscillator :sin 1 0.5 0)
      sum (oscillators-sum w1 w2)]
  (sum 0.5))
;;=&gt; -0.24999999999999994</code></pre></div><div><blockquote><p>Signal plot</p></blockquote><img src="images/s/sum.jpg" /></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/signal.clj#L945">view source</a></div></div><div class="public anchor" id="var-save-signal"><h3>save-signal</h3><div class="usage"><code>(save-signal sig filename)</code></div><div class="doc"><div class="markdown"><p>Save signal to file.</p>
<p>Representation is: 16 bit signed, big endian file You can use Audacity/SOX utilities to convert files to audio.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(let [s (oscillator-&gt;signal (oscillator :sin 1 1 0) 11050 5)]
  (save-signal s "signal.raw"))
;;=&gt; [D@6baac161</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/signal.clj#L839">view source</a></div></div><div class="public anchor" id="var-signal-.3Eoscillator"><h3>signal-&gt;oscillator</h3><div class="usage"><code>(signal-&gt;oscillator sig seconds)</code><code>(signal-&gt;oscillator sig seconds interpolator)</code></div><div class="doc"><div class="markdown"><p>Create oscillator from signal.</p>
<p>Parameters:</p>
<ul>
  <li>sig - signal as sequence</li>
  <li>seconds - duration</li>
  <li>interpolator - interpolation (see <a href="fastmath.interpolation.html">fastmath.interpolation</a>). Default: <a href="fastmath.interpolation.html#var-linear-smile">linear-smile</a>.</li>
</ul></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(let [w (oscillator :sin 0.2 0.9 0.2)
      w2 (signal-&gt;oscillator (oscillator-&gt;signal w 44100 5) 5)]
  {:original (w 0.5), :converted (w2 0.5)})
;;=&gt; {:converted 0.8559508646656382, :original 0.8559508646656382}</code></pre></div></div><div class="src-link"><a href="https://github.com/generateme/fastmath/blob/master/src/fastmath/signal.clj#L975">view source</a></div></div></div></body></html>