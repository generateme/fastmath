<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-99.9.9">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Complex numbers and quaternions â€“ Fastmath documentation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./random.html" rel="next">
<link href="./vector_matrix.html" rel="prev">
<link href="./clay/resources/favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-494121dfa8658343c03537e94414993d.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-5080318e4e0fa5434adc66c5e0128d3e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./complex_quaternions.html">Complex numbers and quaternions</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Fastmath documentation</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./core.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Core</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vector_matrix.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Vectors and matrices</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./complex_quaternions.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Complex numbers and quaternions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./random.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Random</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./polynomials.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Polynomials</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./special.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Special functions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./calculus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Calculus</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./interpolation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Interpolation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./optimization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Optimization</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Transforms</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ml.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Machine Learning</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./easings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Easings</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./fields.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Vector fields</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./efloat.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">EFloat</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#complex-numbers" id="toc-complex-numbers" class="nav-link active" data-scroll-target="#complex-numbers">Complex numbers</a>
  <ul>
  <li><a href="#constants" id="toc-constants" class="nav-link" data-scroll-target="#constants">Constants</a></li>
  <li><a href="#basic-operations" id="toc-basic-operations" class="nav-link" data-scroll-target="#basic-operations">Basic operations</a></li>
  <li><a href="#predicates" id="toc-predicates" class="nav-link" data-scroll-target="#predicates">Predicates</a></li>
  <li><a href="#power-and-logarithms" id="toc-power-and-logarithms" class="nav-link" data-scroll-target="#power-and-logarithms">Power and logarithms</a></li>
  <li><a href="#trigonometric-and-hyperbolic" id="toc-trigonometric-and-hyperbolic" class="nav-link" data-scroll-target="#trigonometric-and-hyperbolic">Trigonometric and Hyperbolic</a></li>
  </ul></li>
  <li><a href="#quaternions" id="toc-quaternions" class="nav-link" data-scroll-target="#quaternions">Quaternions</a>
  <ul>
  <li><a href="#constants-1" id="toc-constants-1" class="nav-link" data-scroll-target="#constants-1">Constants</a></li>
  <li><a href="#basic-operations-1" id="toc-basic-operations-1" class="nav-link" data-scroll-target="#basic-operations-1">Basic operations</a></li>
  <li><a href="#predicates-1" id="toc-predicates-1" class="nav-link" data-scroll-target="#predicates-1">Predicates</a></li>
  <li><a href="#power-and-logarithms-1" id="toc-power-and-logarithms-1" class="nav-link" data-scroll-target="#power-and-logarithms-1">Power and Logarithms</a></li>
  <li><a href="#trigonometric-and-hyperbolic-1" id="toc-trigonometric-and-hyperbolic-1" class="nav-link" data-scroll-target="#trigonometric-and-hyperbolic-1">Trigonometric and Hyperbolic</a></li>
  <li><a href="#rotation-functions" id="toc-rotation-functions" class="nav-link" data-scroll-target="#rotation-functions">Rotation Functions</a>
  <ul>
  <li><a href="#slerp" id="toc-slerp" class="nav-link" data-scroll-target="#slerp">Slerp</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#reference" id="toc-reference" class="nav-link" data-scroll-target="#reference">Reference</a>
  <ul>
  <li><a href="#fastmath.complex" id="toc-fastmath.complex" class="nav-link" data-scroll-target="#fastmath.complex">fastmath.complex</a>
  <ul>
  <li><a href="#i" id="toc-i" class="nav-link" data-scroll-target="#i">-I</a></li>
  <li><a href="#i-1" id="toc-i-1" class="nav-link" data-scroll-target="#i-1">I</a></li>
  <li><a href="#i-" id="toc-i-" class="nav-link" data-scroll-target="#i-">I-</a></li>
  <li><a href="#one" id="toc-one" class="nav-link" data-scroll-target="#one">ONE</a></li>
  <li><a href="#pi" id="toc-pi" class="nav-link" data-scroll-target="#pi">PI</a></li>
  <li><a href="#two" id="toc-two" class="nav-link" data-scroll-target="#two">TWO</a></li>
  <li><a href="#zero" id="toc-zero" class="nav-link" data-scroll-target="#zero">ZERO</a></li>
  <li><a href="#abs" id="toc-abs" class="nav-link" data-scroll-target="#abs">abs</a></li>
  <li><a href="#acos" id="toc-acos" class="nav-link" data-scroll-target="#acos">acos</a></li>
  <li><a href="#acosh" id="toc-acosh" class="nav-link" data-scroll-target="#acosh">acosh</a></li>
  <li><a href="#acot" id="toc-acot" class="nav-link" data-scroll-target="#acot">acot</a></li>
  <li><a href="#acoth" id="toc-acoth" class="nav-link" data-scroll-target="#acoth">acoth</a></li>
  <li><a href="#acsc" id="toc-acsc" class="nav-link" data-scroll-target="#acsc">acsc</a></li>
  <li><a href="#acsch" id="toc-acsch" class="nav-link" data-scroll-target="#acsch">acsch</a></li>
  <li><a href="#add" id="toc-add" class="nav-link" data-scroll-target="#add">add</a></li>
  <li><a href="#adds" id="toc-adds" class="nav-link" data-scroll-target="#adds">adds</a></li>
  <li><a href="#arg" id="toc-arg" class="nav-link" data-scroll-target="#arg">arg</a></li>
  <li><a href="#asec" id="toc-asec" class="nav-link" data-scroll-target="#asec">asec</a></li>
  <li><a href="#asech" id="toc-asech" class="nav-link" data-scroll-target="#asech">asech</a></li>
  <li><a href="#asin" id="toc-asin" class="nav-link" data-scroll-target="#asin">asin</a></li>
  <li><a href="#asinh" id="toc-asinh" class="nav-link" data-scroll-target="#asinh">asinh</a></li>
  <li><a href="#atan" id="toc-atan" class="nav-link" data-scroll-target="#atan">atan</a></li>
  <li><a href="#atanh" id="toc-atanh" class="nav-link" data-scroll-target="#atanh">atanh</a></li>
  <li><a href="#complex" id="toc-complex" class="nav-link" data-scroll-target="#complex">complex</a></li>
  <li><a href="#conjugate" id="toc-conjugate" class="nav-link" data-scroll-target="#conjugate">conjugate</a></li>
  <li><a href="#cos" id="toc-cos" class="nav-link" data-scroll-target="#cos">cos</a></li>
  <li><a href="#cosh" id="toc-cosh" class="nav-link" data-scroll-target="#cosh">cosh</a></li>
  <li><a href="#cot" id="toc-cot" class="nav-link" data-scroll-target="#cot">cot</a></li>
  <li><a href="#coth" id="toc-coth" class="nav-link" data-scroll-target="#coth">coth</a></li>
  <li><a href="#csc" id="toc-csc" class="nav-link" data-scroll-target="#csc">csc</a></li>
  <li><a href="#csch" id="toc-csch" class="nav-link" data-scroll-target="#csch">csch</a></li>
  <li><a href="#csgn" id="toc-csgn" class="nav-link" data-scroll-target="#csgn">csgn</a></li>
  <li><a href="#delta-eq" id="toc-delta-eq" class="nav-link" data-scroll-target="#delta-eq">delta-eq</a></li>
  <li><a href="#div" id="toc-div" class="nav-link" data-scroll-target="#div">div</a></li>
  <li><a href="#ensure-complex" id="toc-ensure-complex" class="nav-link" data-scroll-target="#ensure-complex">ensure-complex</a></li>
  <li><a href="#exp" id="toc-exp" class="nav-link" data-scroll-target="#exp">exp</a></li>
  <li><a href="#flip" id="toc-flip" class="nav-link" data-scroll-target="#flip">flip</a></li>
  <li><a href="#im" id="toc-im" class="nav-link" data-scroll-target="#im">im</a></li>
  <li><a href="#imaginary" id="toc-imaginary" class="nav-link" data-scroll-target="#imaginary">imaginary?</a></li>
  <li><a href="#inf" id="toc-inf" class="nav-link" data-scroll-target="#inf">inf?</a></li>
  <li><a href="#invalid" id="toc-invalid" class="nav-link" data-scroll-target="#invalid">invalid?</a></li>
  <li><a href="#log" id="toc-log" class="nav-link" data-scroll-target="#log">log</a></li>
  <li><a href="#logb" id="toc-logb" class="nav-link" data-scroll-target="#logb">logb</a></li>
  <li><a href="#muladd" id="toc-muladd" class="nav-link" data-scroll-target="#muladd">muladd</a></li>
  <li><a href="#mult" id="toc-mult" class="nav-link" data-scroll-target="#mult">mult</a></li>
  <li><a href="#mult-i" id="toc-mult-i" class="nav-link" data-scroll-target="#mult-i">mult-I</a></li>
  <li><a href="#mult-i-" id="toc-mult-i-" class="nav-link" data-scroll-target="#mult-i-">mult-I-</a></li>
  <li><a href="#nan" id="toc-nan" class="nav-link" data-scroll-target="#nan">nan?</a></li>
  <li><a href="#neg" id="toc-neg" class="nav-link" data-scroll-target="#neg">neg</a></li>
  <li><a href="#norm" id="toc-norm" class="nav-link" data-scroll-target="#norm">norm</a></li>
  <li><a href="#normalize" id="toc-normalize" class="nav-link" data-scroll-target="#normalize">normalize</a></li>
  <li><a href="#pow" id="toc-pow" class="nav-link" data-scroll-target="#pow">pow</a></li>
  <li><a href="#re" id="toc-re" class="nav-link" data-scroll-target="#re">re</a></li>
  <li><a href="#real" id="toc-real" class="nav-link" data-scroll-target="#real">real?</a></li>
  <li><a href="#reciprocal" id="toc-reciprocal" class="nav-link" data-scroll-target="#reciprocal">reciprocal</a></li>
  <li><a href="#scale" id="toc-scale" class="nav-link" data-scroll-target="#scale">scale</a></li>
  <li><a href="#sec" id="toc-sec" class="nav-link" data-scroll-target="#sec">sec</a></li>
  <li><a href="#sech" id="toc-sech" class="nav-link" data-scroll-target="#sech">sech</a></li>
  <li><a href="#sin" id="toc-sin" class="nav-link" data-scroll-target="#sin">sin</a></li>
  <li><a href="#sinh" id="toc-sinh" class="nav-link" data-scroll-target="#sinh">sinh</a></li>
  <li><a href="#sq" id="toc-sq" class="nav-link" data-scroll-target="#sq">sq</a></li>
  <li><a href="#sqrt" id="toc-sqrt" class="nav-link" data-scroll-target="#sqrt">sqrt</a></li>
  <li><a href="#sqrt1z" id="toc-sqrt1z" class="nav-link" data-scroll-target="#sqrt1z">sqrt1z</a></li>
  <li><a href="#sub" id="toc-sub" class="nav-link" data-scroll-target="#sub">sub</a></li>
  <li><a href="#tan" id="toc-tan" class="nav-link" data-scroll-target="#tan">tan</a></li>
  <li><a href="#tanh" id="toc-tanh" class="nav-link" data-scroll-target="#tanh">tanh</a></li>
  <li><a href="#valid" id="toc-valid" class="nav-link" data-scroll-target="#valid">valid?</a></li>
  <li><a href="#zero-1" id="toc-zero-1" class="nav-link" data-scroll-target="#zero-1">zero?</a></li>
  </ul></li>
  <li><a href="#fastmath.quaternion" id="toc-fastmath.quaternion" class="nav-link" data-scroll-target="#fastmath.quaternion">fastmath.quaternion</a>
  <ul>
  <li><a href="#i-2" id="toc-i-2" class="nav-link" data-scroll-target="#i-2">-I</a></li>
  <li><a href="#j" id="toc-j" class="nav-link" data-scroll-target="#j">-J</a></li>
  <li><a href="#k" id="toc-k" class="nav-link" data-scroll-target="#k">-K</a></li>
  <li><a href="#i-3" id="toc-i-3" class="nav-link" data-scroll-target="#i-3">I</a></li>
  <li><a href="#j-1" id="toc-j-1" class="nav-link" data-scroll-target="#j-1">J</a></li>
  <li><a href="#k-1" id="toc-k-1" class="nav-link" data-scroll-target="#k-1">K</a></li>
  <li><a href="#one-1" id="toc-one-1" class="nav-link" data-scroll-target="#one-1">ONE</a></li>
  <li><a href="#zero-2" id="toc-zero-2" class="nav-link" data-scroll-target="#zero-2">ZERO</a></li>
  <li><a href="#acos-1" id="toc-acos-1" class="nav-link" data-scroll-target="#acos-1">acos</a></li>
  <li><a href="#acosh-1" id="toc-acosh-1" class="nav-link" data-scroll-target="#acosh-1">acosh</a></li>
  <li><a href="#acot-1" id="toc-acot-1" class="nav-link" data-scroll-target="#acot-1">acot</a></li>
  <li><a href="#acoth-1" id="toc-acoth-1" class="nav-link" data-scroll-target="#acoth-1">acoth</a></li>
  <li><a href="#acsc-1" id="toc-acsc-1" class="nav-link" data-scroll-target="#acsc-1">acsc</a></li>
  <li><a href="#acsch-1" id="toc-acsch-1" class="nav-link" data-scroll-target="#acsch-1">acsch</a></li>
  <li><a href="#add-1" id="toc-add-1" class="nav-link" data-scroll-target="#add-1">add</a></li>
  <li><a href="#adds-1" id="toc-adds-1" class="nav-link" data-scroll-target="#adds-1">adds</a></li>
  <li><a href="#arg-1" id="toc-arg-1" class="nav-link" data-scroll-target="#arg-1">arg</a></li>
  <li><a href="#asec-1" id="toc-asec-1" class="nav-link" data-scroll-target="#asec-1">asec</a></li>
  <li><a href="#asech-1" id="toc-asech-1" class="nav-link" data-scroll-target="#asech-1">asech</a></li>
  <li><a href="#asin-1" id="toc-asin-1" class="nav-link" data-scroll-target="#asin-1">asin</a></li>
  <li><a href="#asinh-1" id="toc-asinh-1" class="nav-link" data-scroll-target="#asinh-1">asinh</a></li>
  <li><a href="#atan-1" id="toc-atan-1" class="nav-link" data-scroll-target="#atan-1">atan</a></li>
  <li><a href="#atanh-1" id="toc-atanh-1" class="nav-link" data-scroll-target="#atanh-1">atanh</a></li>
  <li><a href="#complex-quaternion" id="toc-complex-quaternion" class="nav-link" data-scroll-target="#complex-quaternion">complex-&gt;quaternion</a></li>
  <li><a href="#conjugate-1" id="toc-conjugate-1" class="nav-link" data-scroll-target="#conjugate-1">conjugate</a></li>
  <li><a href="#cos-1" id="toc-cos-1" class="nav-link" data-scroll-target="#cos-1">cos</a></li>
  <li><a href="#cosh-1" id="toc-cosh-1" class="nav-link" data-scroll-target="#cosh-1">cosh</a></li>
  <li><a href="#cot-1" id="toc-cot-1" class="nav-link" data-scroll-target="#cot-1">cot</a></li>
  <li><a href="#coth-1" id="toc-coth-1" class="nav-link" data-scroll-target="#coth-1">coth</a></li>
  <li><a href="#csc-1" id="toc-csc-1" class="nav-link" data-scroll-target="#csc-1">csc</a></li>
  <li><a href="#csch-1" id="toc-csch-1" class="nav-link" data-scroll-target="#csch-1">csch</a></li>
  <li><a href="#delta-eq-1" id="toc-delta-eq-1" class="nav-link" data-scroll-target="#delta-eq-1">delta-eq</a></li>
  <li><a href="#div-1" id="toc-div-1" class="nav-link" data-scroll-target="#div-1">div</a></li>
  <li><a href="#ensure-quaternion" id="toc-ensure-quaternion" class="nav-link" data-scroll-target="#ensure-quaternion">ensure-quaternion</a></li>
  <li><a href="#exp-1" id="toc-exp-1" class="nav-link" data-scroll-target="#exp-1">exp</a></li>
  <li><a href="#from-angles" id="toc-from-angles" class="nav-link" data-scroll-target="#from-angles">from-angles</a></li>
  <li><a href="#from-euler" id="toc-from-euler" class="nav-link" data-scroll-target="#from-euler">from-euler</a></li>
  <li><a href="#from-rotation-matrix" id="toc-from-rotation-matrix" class="nav-link" data-scroll-target="#from-rotation-matrix">from-rotation-matrix</a></li>
  <li><a href="#im-i" id="toc-im-i" class="nav-link" data-scroll-target="#im-i">im-i</a></li>
  <li><a href="#im-j" id="toc-im-j" class="nav-link" data-scroll-target="#im-j">im-j</a></li>
  <li><a href="#im-k" id="toc-im-k" class="nav-link" data-scroll-target="#im-k">im-k</a></li>
  <li><a href="#imaginary-1" id="toc-imaginary-1" class="nav-link" data-scroll-target="#imaginary-1">imaginary?</a></li>
  <li><a href="#inf-1" id="toc-inf-1" class="nav-link" data-scroll-target="#inf-1">inf?</a></li>
  <li><a href="#invalid-1" id="toc-invalid-1" class="nav-link" data-scroll-target="#invalid-1">invalid?</a></li>
  <li><a href="#log-1" id="toc-log-1" class="nav-link" data-scroll-target="#log-1">log</a></li>
  <li><a href="#logb-1" id="toc-logb-1" class="nav-link" data-scroll-target="#logb-1">logb</a></li>
  <li><a href="#mult-1" id="toc-mult-1" class="nav-link" data-scroll-target="#mult-1">mult</a></li>
  <li><a href="#nan-1" id="toc-nan-1" class="nav-link" data-scroll-target="#nan-1">nan?</a></li>
  <li><a href="#neg-1" id="toc-neg-1" class="nav-link" data-scroll-target="#neg-1">neg</a></li>
  <li><a href="#norm-1" id="toc-norm-1" class="nav-link" data-scroll-target="#norm-1">norm</a></li>
  <li><a href="#normalize-1" id="toc-normalize-1" class="nav-link" data-scroll-target="#normalize-1">normalize</a></li>
  <li><a href="#pow-1" id="toc-pow-1" class="nav-link" data-scroll-target="#pow-1">pow</a></li>
  <li><a href="#qsgn" id="toc-qsgn" class="nav-link" data-scroll-target="#qsgn">qsgn</a></li>
  <li><a href="#quaternion" id="toc-quaternion" class="nav-link" data-scroll-target="#quaternion">quaternion</a></li>
  <li><a href="#re-1" id="toc-re-1" class="nav-link" data-scroll-target="#re-1">re</a></li>
  <li><a href="#real-1" id="toc-real-1" class="nav-link" data-scroll-target="#real-1">real?</a></li>
  <li><a href="#reciprocal-1" id="toc-reciprocal-1" class="nav-link" data-scroll-target="#reciprocal-1">reciprocal</a></li>
  <li><a href="#rotate" id="toc-rotate" class="nav-link" data-scroll-target="#rotate">rotate</a></li>
  <li><a href="#rotation-quaternion" id="toc-rotation-quaternion" class="nav-link" data-scroll-target="#rotation-quaternion">rotation-quaternion</a></li>
  <li><a href="#scalar" id="toc-scalar" class="nav-link" data-scroll-target="#scalar">scalar</a></li>
  <li><a href="#scale-1" id="toc-scale-1" class="nav-link" data-scroll-target="#scale-1">scale</a></li>
  <li><a href="#sec-1" id="toc-sec-1" class="nav-link" data-scroll-target="#sec-1">sec</a></li>
  <li><a href="#sech-1" id="toc-sech-1" class="nav-link" data-scroll-target="#sech-1">sech</a></li>
  <li><a href="#sin-1" id="toc-sin-1" class="nav-link" data-scroll-target="#sin-1">sin</a></li>
  <li><a href="#sinh-1" id="toc-sinh-1" class="nav-link" data-scroll-target="#sinh-1">sinh</a></li>
  <li><a href="#slerp-1" id="toc-slerp-1" class="nav-link" data-scroll-target="#slerp-1">slerp</a></li>
  <li><a href="#sq-1" id="toc-sq-1" class="nav-link" data-scroll-target="#sq-1">sq</a></li>
  <li><a href="#sqrt-1" id="toc-sqrt-1" class="nav-link" data-scroll-target="#sqrt-1">sqrt</a></li>
  <li><a href="#sub-1" id="toc-sub-1" class="nav-link" data-scroll-target="#sub-1">sub</a></li>
  <li><a href="#tan-1" id="toc-tan-1" class="nav-link" data-scroll-target="#tan-1">tan</a></li>
  <li><a href="#tanh-1" id="toc-tanh-1" class="nav-link" data-scroll-target="#tanh-1">tanh</a></li>
  <li><a href="#to-angles" id="toc-to-angles" class="nav-link" data-scroll-target="#to-angles">to-angles</a></li>
  <li><a href="#to-euler" id="toc-to-euler" class="nav-link" data-scroll-target="#to-euler">to-euler</a></li>
  <li><a href="#to-rotation-matrix" id="toc-to-rotation-matrix" class="nav-link" data-scroll-target="#to-rotation-matrix">to-rotation-matrix</a></li>
  <li><a href="#valid-1" id="toc-valid-1" class="nav-link" data-scroll-target="#valid-1">valid?</a></li>
  <li><a href="#vector" id="toc-vector" class="nav-link" data-scroll-target="#vector">vector</a></li>
  <li><a href="#zero-3" id="toc-zero-3" class="nav-link" data-scroll-target="#zero-3">zero?</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Complex numbers and quaternions</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<style></style>
<style>.printedClojure .sourceCode {
  background-color: transparent;
  border-style: none;
}
</style>
<style>.clay-limit-image-width .clay-image {max-width: 100%}
.clay-side-by-side .sourceCode {margin: 0}
.clay-side-by-side {margin: 1em 0}
</style>
<script src="complex_quaternions_files/md-default36.js" type="text/javascript"></script>
<script src="complex_quaternions_files/md-default37.js" type="text/javascript"></script>
<div class="sourceClojure">
<div class="sourceCode" id="cb1"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">ns</span> complex-quaternions</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  (<span class="at">:require</span> [fastmath.complex <span class="at">:as</span> cplx]</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>            [fastmath.quaternion <span class="at">:as</span> quat]</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>            [fastmath.<span class="kw">vector</span> <span class="at">:as</span> v]</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>            [fastmath.dev.codox <span class="at">:as</span> codox]</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>            [fastmath.dev.ggplot <span class="at">:as</span> gg]</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>            [fastmath.dev.clay <span class="at">:as</span> utls]</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>            [scicloj.kindly.v4.kind <span class="at">:as</span> kind]</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>            [fastmath.core <span class="at">:as</span> m]</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>            [fastmath.matrix <span class="at">:as</span> mat]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="complex-numbers" class="level2">
<h2 class="anchored" data-anchor-id="complex-numbers">Complex numbers</h2>
<div class="callout callout-style-default callout-tip callout-titled" title="Defined functions">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Defined functions
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><code>complex</code>, <code>ensure-complex</code></li>
</ul>
</div>
</div>
<p>Complex numbers extend the concept of real numbers by including an imaginary unit <span class="math inline">\(i\)</span>, where <span class="math inline">\(i^2 = -1\)</span>.</p>
<p>In <code>fastmath</code>, complex numbers are represented as 2-dimensional vectors using the <code>fastmath.vector/Vec2</code> type, where the x-component is the real part and the y-component is the imaginary part.</p>
<p>You can create complex numbers using the dedicated <code>complex</code> function, the general 2D vector constructor <code>fastmath.vector/vec2</code>, or by converting sequences/arrays using functions like <code>fastmath.vector/seq-&gt;vec2</code>. <code>ensure-complex</code> accepts single argument which can be a real or complex number.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Examples">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Examples
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceClojure">
<div class="sourceCode" id="cb2"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>(cplx/complex) <span class="co">;; =&gt; #vec2 [0.0, 0.0]</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>(cplx/complex <span class="fl">1.0</span>) <span class="co">;; =&gt; #vec2 [1.0, 0.0]</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>(cplx/complex <span class="fl">1.0</span> -<span class="fl">2.0</span>) <span class="co">;; =&gt; #vec2 [1.0, -2.0]</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>(v/vec2 <span class="fl">1.0</span> -<span class="fl">2.0</span>) <span class="co">;; =&gt; #vec2 [1.0, -2.0]</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>(v/seq-&gt;vec2 [<span class="fl">1.0</span> -<span class="fl">2.0</span>]) <span class="co">;; =&gt; #vec2 [1.0, -2.0]</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>(cplx/ensure-complex <span class="fl">2.0</span>) <span class="co">;; =&gt; #vec2 [2.0, 0.0]</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>(cplx/ensure-complex (cplx/complex <span class="fl">1.0</span> -<span class="fl">2.0</span>)) <span class="co">;; =&gt; #vec2 [1.0, -2.0]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>The implementation handles floating-point subtleties, including special values (<code>##Inf</code>, <code>##NaN</code>) and signed zero (<code>+0.0</code>, <code>-0.0</code>), for robust calculations across a wide range of inputs.</p>
<p>This section covers constants, predicates, and a comprehensive set of operations including basic arithmetic, exponentiation, logarithms, trigonometric functions, and their inverses.</p>
<p>Plots are based on domain coloring in HSB space, where</p>
<ul>
<li>hue - represents argument</li>
<li>saturation/brightness - represents fractional part of logarithm of magnitude</li>
</ul>
<div class="clay-image">
<img class="clay-image" src="complex_quaternions_files/0.png">
</div>
<p>We will use these numbers to illustrate operations:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb3"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> z1 </span>(cplx/complex <span class="fl">0.5</span> -<span class="fl">1.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb4"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> z2 </span>(cplx/complex -<span class="fl">0.5</span> <span class="fl">2.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb5"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> z3 </span>(cplx/complex <span class="fl">1.5</span> <span class="fl">0.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="Examples">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Examples
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceClojure">
<div class="sourceCode" id="cb6"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>z1 <span class="co">;; =&gt; #vec2 [0.5, -1.5]</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>z2 <span class="co">;; =&gt; #vec2 [-0.5, 2.5]</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>z3 <span class="co">;; =&gt; #vec2 [1.5, 0.5]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<section id="constants" class="level3">
<h3 class="anchored" data-anchor-id="constants">Constants</h3>
<p>List of defined complex constants.</p>
<div class="clay-table">
<div class="table-responsive">
<table class="table table-hover clay-table caption-top" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">constant</th>
<th data-quarto-table-cell-role="th">z</th>
<th data-quarto-table-cell-role="th">value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>I</td>
<td><span class="math inline">\(0+i\)</span></td>
<td>#vec2 [0.0, 1.0]</td>
</tr>
<tr class="even">
<td>-I</td>
<td><span class="math inline">\(0-i\)</span></td>
<td>#vec2 [0.0, -1.0]</td>
</tr>
<tr class="odd">
<td>I-</td>
<td><span class="math inline">\(0-i\)</span></td>
<td>#vec2 [0.0, -1.0]</td>
</tr>
<tr class="even">
<td>ZERO</td>
<td><span class="math inline">\(0+0i\)</span></td>
<td>#vec2 [0.0, 0.0]</td>
</tr>
<tr class="odd">
<td>ONE</td>
<td><span class="math inline">\(1+0i\)</span></td>
<td>#vec2 [1.0, 0.0]</td>
</tr>
<tr class="even">
<td>TWO</td>
<td><span class="math inline">\(2+0i\)</span></td>
<td>#vec2 [2.0, 0.0]</td>
</tr>
<tr class="odd">
<td>PI</td>
<td><span class="math inline">\(\pi+0i\)</span></td>
<td>#vec2 [3.141592653589793, 0.0]</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="basic-operations" class="level3">
<h3 class="anchored" data-anchor-id="basic-operations">Basic operations</h3>
<p>This section provides a collection of functions for performing fundamental operations on complex numbers. These operations include extracting components, calculating magnitude and argument, finding conjugates, performing arithmetic (addition, subtraction, multiplication, division), negation, reciprocals, and square roots.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Defined functions">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Defined functions
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><code>re</code>, <code>im</code></li>
<li><code>delta-eq</code>, <code>csgn</code>, <code>flip</code></li>
<li><code>abs</code>, <code>norm</code>, <code>normalize</code>, <code>conjugate</code></li>
<li><code>arg</code></li>
<li><code>add</code>, <code>adds</code>, <code>sub</code>, <code>neg</code></li>
<li><code>scale</code>, <code>mult</code>, <code>mult-I</code>, <code>mult-I-</code>, <code>muladd</code>, <code>sq</code></li>
<li><code>div</code>, <code>reciprocal</code></li>
<li><code>sqrt</code>, <code>sqrt1z</code></li>
</ul>
</div>
</div>
<ul>
<li><p><strong>Components</strong></p>
<ul>
<li><code>re</code>: Returns the real part of a complex number <span class="math inline">\(z\)</span>. For <span class="math inline">\(z = a + bi\)</span>, returns <span class="math inline">\(a\)</span>.</li>
<li><code>im</code>: Returns the imaginary part of a complex number <span class="math inline">\(z\)</span>. For <span class="math inline">\(z = a + bi\)</span>, returns <span class="math inline">\(b\)</span>.</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Examples">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Examples
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceClojure">
<div class="sourceCode" id="cb7"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>(cplx/re z1) <span class="co">;; =&gt; 0.5</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>(cplx/im z1) <span class="co">;; =&gt; -1.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<ul>
<li><p><strong>Properties and Comparisons</strong></p>
<ul>
<li><code>abs</code>: Calculates the magnitude or modulus of a complex number <span class="math inline">\(|z|\)</span>. For <span class="math inline">\(z = a + bi\)</span>: <span class="math display">\[|z| = \sqrt{a^2 + b^2}\]</span> This corresponds to the length of the vector <code>(Vec2. a b)</code>.</li>
<li><code>norm</code>: Calculates the squared magnitude <span class="math inline">\(|z|^2\)</span>. For <span class="math inline">\(z = a + bi\)</span>: <span class="math display">\[|z|^2 = a^2 + b^2\]</span> This avoids the square root calculation and is often used when comparing magnitudes.</li>
<li><code>arg</code>: Computes the argument (phase angle) of a complex number <span class="math inline">\(z\)</span>. This is the angle <span class="math inline">\(\phi\)</span> such that <span class="math inline">\(z = |z| (\cos \phi + i \sin \phi)\)</span>, and is typically in the range <span class="math inline">\((-\pi, \pi]\)</span>. Calculated as: <span class="math display">\[\operatorname{arg}(z)=\operatorname{atan2}(\operatorname{im}(z), \operatorname{re}(z))\]</span></li>
<li><code>normalize</code>: Sets magnitude of a complex number <span class="math inline">\(z\)</span> to 1.0: <span class="math display">\[\frac{z}{|z|}\]</span></li>
<li><code>conjugate</code>: Returns the complex conjugate of <span class="math inline">\(z\)</span>, denoted <span class="math inline">\(\bar{z}\)</span>. For <span class="math inline">\(z = a + bi\)</span>: <span class="math display">\[\bar{z} = a - bi\]</span> Geometrically, this is a reflection across the real axis.</li>
<li><code>flip</code>: Swaps the real and imaginary parts of a complex number. For <span class="math inline">\(z = a + bi\)</span>, returns <span class="math inline">\(b + ai\)</span>.</li>
<li><code>delta-eq</code>: Checks if two complex numbers are approximately equal within a given tolerance. This is essential for floating-point comparisons and equivalent to checking if <span class="math inline">\(|z_1 - z_2| &lt; \text{tolerance}\)</span>.</li>
<li><code>csgn</code>: Implements the complex signum function. Returns 0 for the zero complex number. For non-zero <span class="math inline">\(z\)</span>, it returns the sign of the real part <span class="math inline">\(\operatorname{sgn}(\operatorname{re}(z))\)</span>.</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Examples">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Examples
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceClojure">
<div class="sourceCode" id="cb8"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>z1 <span class="co">;; =&gt; #vec2 [0.5, -1.5]</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>(cplx/abs z1) <span class="co">;; =&gt; 1.5811388300841898</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>(cplx/norm z1) <span class="co">;; =&gt; 2.5</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>(cplx/arg z1) <span class="co">;; =&gt; -1.2490457723982544</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>(cplx/normalize z1) <span class="co">;; =&gt; #vec2 [0.31622776601683794, -0.9486832980505138]</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>(cplx/abs (cplx/normalize z1)) <span class="co">;; =&gt; 0.9999999999999999</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>(cplx/conjugate z1) <span class="co">;; =&gt; #vec2 [0.5, 1.5]</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>(cplx/flip z1) <span class="co">;; =&gt; #vec2 [-1.5, 0.5]</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>z2 <span class="co">;; =&gt; #vec2 [-0.5, 2.5]</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>(cplx/abs z2) <span class="co">;; =&gt; 2.5495097567963922</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>(cplx/norm z2) <span class="co">;; =&gt; 6.5</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>(cplx/arg z2) <span class="co">;; =&gt; 1.7681918866447774</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>(cplx/normalize z2) <span class="co">;; =&gt; #vec2 [-0.19611613513818404, 0.9805806756909202]</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>(cplx/abs (cplx/normalize z2)) <span class="co">;; =&gt; 1.0</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>(cplx/conjugate z2) <span class="co">;; =&gt; #vec2 [-0.5, -2.5]</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>(cplx/flip z2) <span class="co">;; =&gt; #vec2 [2.5, -0.5]</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>(cplx/csgn z1) <span class="co">;; =&gt; 1.0</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>(cplx/csgn z2) <span class="co">;; =&gt; -1.0</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>(cplx/csgn cplx/ZERO) <span class="co">;; =&gt; 0.0</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>(cplx/delta-eq (cplx/complex <span class="fl">0.001</span>) cplx/ZERO) <span class="co">;; =&gt; false</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>(cplx/delta-eq (cplx/complex <span class="fl">0.001</span>) cplx/ZERO <span class="fl">0.01</span>) <span class="co">;; =&gt; true</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<ul>
<li><p><strong>Arithmetic Operations</strong></p>
<ul>
<li><code>add</code>: Computes the sum of two complex numbers, <span class="math inline">\(z_1 + z_2\)</span>. If <span class="math inline">\(z_1 = a + bi\)</span> and <span class="math inline">\(z_2 = c + di\)</span>: <span class="math display">\[z_1 + z_2 = (a+c) + (b+d)i\]</span></li>
<li><code>adds</code>: Adds a real scalar <span class="math inline">\(s\)</span> to a complex number <span class="math inline">\(z\)</span>. For <span class="math inline">\(z = a + bi\)</span>: <span class="math display">\[z + s = (a+s) + bi\]</span></li>
<li><code>sub</code>: Computes the difference of two complex numbers, <span class="math inline">\(z_1 - z_2\)</span>. If <span class="math inline">\(z_1 = a + bi\)</span> and <span class="math inline">\(z_2 = c + di\)</span>: <span class="math display">\[z_1 - z_2 = (a-c) + (b-d)i\]</span></li>
<li><code>neg</code>: Returns the negation of a complex number, <span class="math inline">\(-z\)</span>. For <span class="math inline">\(z = a + bi\)</span>: <span class="math display">\[-z = -a - bi\]</span></li>
<li><code>scale</code>: Multiplies a complex number <span class="math inline">\(z\)</span> by a real scalar <span class="math inline">\(s\)</span>. For <span class="math inline">\(z = a + bi\)</span>: <span class="math display">\[z \cdot s = (as) + (bs)i\]</span></li>
<li><code>mult</code>: Computes the product of two complex numbers, <span class="math inline">\(z_1 \cdot z_2\)</span>. If <span class="math inline">\(z_1 = a + bi\)</span> and <span class="math inline">\(z_2 = c + di\)</span>: <span class="math display">\[z_1 \cdot z_2 = (ac - bd) + (ad + bc)i\]</span></li>
<li><code>mult-I</code>: Multiplies a complex number <span class="math inline">\(z\)</span> by the imaginary unit <span class="math inline">\(i\)</span>. For <span class="math inline">\(z = a + bi\)</span>: <span class="math display">\[z \cdot i = -b + ai\]</span></li>
<li><code>mult-I-</code>: Multiplies a complex number <span class="math inline">\(z\)</span> by <span class="math inline">\(-i\)</span>. For <span class="math inline">\(z = a + bi\)</span>: <span class="math display">\[z \cdot (-i) = b - ai\]</span></li>
<li><code>muladd</code>: Computes the fused multiply-add operation <span class="math display">\[(x \cdot y) + z\]</span> for complex numbers <span class="math inline">\(x, y, z\)</span>.</li>
<li><code>sq</code>: Computes the square of a complex number, <span class="math inline">\(z^2\)</span>. For <span class="math inline">\(z = a + bi\)</span>: <span class="math display">\[z^2 = (a^2 - b^2) + 2abi\]</span></li>
<li><code>div</code>: Computes the division of two complex numbers, <span class="math inline">\(z_1 / z_2\)</span>. If <span class="math inline">\(z_1 = a + bi\)</span> and <span class="math inline">\(z_2 = c + di\)</span>: <span class="math display">\[z_1 / z_2 = \frac{z_1 \cdot \bar{z_2}}{|z_2|^2} = \frac{(ac+bd) + (bc-ad)i}{c^2+d^2}\]</span></li>
<li><code>reciprocal</code>: Computes the reciprocal of a complex number, <span class="math inline">\(1/z\)</span>. For <span class="math inline">\(z = a + bi\)</span>: <span class="math display">\[1/z = \frac{\bar{z}}{|z|^2} = \frac{a - bi}{a^2+b^2}\]</span></li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Examples">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Examples
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceClojure">
<div class="sourceCode" id="cb9"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>(cplx/add z1 z2) <span class="co">;; =&gt; #vec2 [0.0, 1.0]</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>(cplx/adds z1 -<span class="fl">3.5</span>) <span class="co">;; =&gt; #vec2 [-3.0, -1.5]</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>(cplx/sub z1 z2) <span class="co">;; =&gt; #vec2 [1.0, -4.0]</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>(cplx/neg z1) <span class="co">;; =&gt; #vec2 [-0.5, 1.5]</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>(cplx/scale z1 <span class="dv">5</span>) <span class="co">;; =&gt; #vec2 [2.5, -7.5]</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>(cplx/mult z1 z2) <span class="co">;; =&gt; #vec2 [3.5, 2.0]</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>(cplx/mult-I z1) <span class="co">;; =&gt; #vec2 [1.5, 0.5]</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>(cplx/mult-I- z1) <span class="co">;; =&gt; #vec2 [-1.5, -0.5]</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>(cplx/muladd z1 z2 z3) <span class="co">;; =&gt; #vec2 [5.0, 2.5]</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>(cplx/sq z1) <span class="co">;; =&gt; #vec2 [-2.0, -1.5]</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>(cplx/div z1 z2) <span class="co">;; =&gt; #vec2 [-0.6153846153846154, -0.07692307692307693]</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>(cplx/reciprocal z1) <span class="co">;; =&gt; #vec2 [0.2, 0.6]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="clay-table">
<div class="table-responsive">
<table class="table table-hover clay-table caption-top" data-quarto-postprocess="true">
<tbody>
<tr class="odd">
<td><img src="complex_quaternions_files/1.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/2.png" class="clay-image img-fluid"></td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li><p><strong>Roots</strong></p>
<ul>
<li><code>sqrt</code>: Computes the principal square root of a complex number: <span class="math display">\[\sqrt{z} = \sqrt{\frac{|a| + x}{2}} + i \cdot \operatorname{sgn}(b) \cdot \sqrt{\frac{|z| - a}{2}}\]</span></li>
<li><code>sqrt1z</code>: Computes <span class="math inline">\(\sqrt{1 - z^2}\)</span> for a complex number <span class="math inline">\(z\)</span>.</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Examples">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Examples
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceClojure">
<div class="sourceCode" id="cb10"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>(cplx/sqrt z1) <span class="co">;; =&gt; #vec2 [1.0200830432087846, -0.7352342586156434]</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>(cplx/sqrt z2) <span class="co">;; =&gt; #vec2 [1.0123017723970438, 1.2348096526988264]</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>(cplx/sqrt z3) <span class="co">;; =&gt; #vec2 [1.2411967672541269, 0.20141850719855633]</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>(cplx/sqrt1z z1) <span class="co">;; =&gt; #vec2 [1.782428394950227, 0.4207742662340966]</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>(cplx/sqrt1z z2) <span class="co">;; =&gt; #vec2 [2.686357605909836, 0.46531407331997443]</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>(cplx/sqrt1z z3) <span class="co">;; =&gt; #vec2 [0.6335517491618166, -1.1838022718621541]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="clay-table">
<div class="table-responsive">
<table class="table table-hover clay-table caption-top" data-quarto-postprocess="true">
<tbody>
<tr class="odd">
<td><img src="complex_quaternions_files/3.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/4.png" class="clay-image img-fluid"></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="predicates" class="level3">
<h3 class="anchored" data-anchor-id="predicates">Predicates</h3>
<p>Predicates are functions that return a boolean value, indicating whether a complex number satisfies a specific condition. They are useful for checking the nature or state of a complex number, such as whether it is real, imaginary, zero, infinite, or invalid.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Defined functions">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Defined functions
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><code>real?</code>, <code>imaginary?</code></li>
<li><code>zero?</code></li>
<li><code>inf?</code>,<code>nan?</code></li>
<li><code>invalid?</code>, <code>valid?</code></li>
</ul>
</div>
</div>
<ul>
<li><code>real?</code>: Checks if a complex number <code>z</code> has a zero imaginary part. <span class="math inline">\(z = a + bi\)</span> is real if <span class="math inline">\(b = \operatorname{im}(z) = 0\)</span>.</li>
<li><code>imaginary?</code>: Checks if a complex number <code>z</code> has a zero real part. <span class="math inline">\(z = a + bi\)</span> is pure imaginary if <span class="math inline">\(a = \operatorname{re}(z) = 0\)</span>.</li>
<li><code>zero?</code>: Checks if <code>z</code> is the complex number <span class="math inline">\(0+0i\)</span>, which is true if both real and imaginary parts are zero.</li>
<li><code>inf?</code>: Checks if either the real or imaginary part of <code>z</code> is positive or negative infinity (<code>##Inf</code> or <code>##-Inf</code>).</li>
<li><code>nan?</code>: Checks if either the real or imaginary part of <code>z</code> is Not a Number (<code>##NaN</code>).</li>
<li><code>invalid?</code>: Checks if <code>z</code> is either <code>inf?</code> or <code>nan?</code>. Represents values that are not finite numbers.</li>
<li><code>valid?</code>: Checks if <code>z</code> is a finite, non-NaN number. This is the opposite of <code>invalid?</code>.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Examples">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Examples
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceClojure">
<div class="sourceCode" id="cb11"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>(cplx/real? cplx/ONE) <span class="co">;; =&gt; true</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>(cplx/real? cplx/I) <span class="co">;; =&gt; false</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>(cplx/imaginary? cplx/ONE) <span class="co">;; =&gt; false</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>(cplx/imaginary? cplx/I) <span class="co">;; =&gt; true</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>(cplx/zero? cplx/ZERO) <span class="co">;; =&gt; true</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>(cplx/zero? cplx/ONE) <span class="co">;; =&gt; false</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>(cplx/inf? (cplx/complex <span class="at">##</span>Inf <span class="dv">1</span>)) <span class="co">;; =&gt; true</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>(cplx/nan? (cplx/complex <span class="dv">1</span> <span class="at">##</span>NaN)) <span class="co">;; =&gt; true</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>(cplx/invalid? (cplx/complex <span class="at">##</span>Inf <span class="dv">1</span>)) <span class="co">;; =&gt; true</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>(cplx/invalid? (cplx/complex <span class="fl">1.0</span> <span class="fl">2.0</span>)) <span class="co">;; =&gt; false</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>(cplx/valid? (cplx/complex <span class="fl">1.0</span> <span class="fl">2.0</span>)) <span class="co">;; =&gt; true</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>(cplx/valid? (cplx/complex <span class="at">##</span>Inf <span class="dv">1</span>)) <span class="co">;; =&gt; false</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="power-and-logarithms" class="level3">
<h3 class="anchored" data-anchor-id="power-and-logarithms">Power and logarithms</h3>
<p>Complex numbers extend the real-valued exponential and logarithm functions. Complex exponentiation allows raising a complex base to a complex power, while the complex logarithm is the inverse operation of exponentiation. Unlike real logarithms, the complex logarithm is multi-valued, but the functions provided here compute the principal value.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Defined functions">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Defined functions
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><code>pow</code>, <code>exp</code></li>
<li><code>log</code>, <code>logb</code></li>
</ul>
</div>
</div>
<ul>
<li><code>exp</code>: Computes the complex exponential <span class="math inline">\(e^z\)</span>. For <span class="math inline">\(z = x + iy\)</span>: <span class="math display">\[e^z = e^{x+iy} = e^x (\cos y + i \sin y)\]</span></li>
<li><code>log</code>: Computes the principal value of the complex natural logarithm <span class="math inline">\(\log z\)</span>. This is given by: <span class="math display">\[\log z = \ln|z| + i \arg(z)\]</span> where <span class="math inline">\(\ln|z|\)</span> is the real natural logarithm of the magnitude <span class="math inline">\(|z|\)</span>, and <span class="math inline">\(\arg(z)\)</span> is the principal argument of <span class="math inline">\(z\)</span>.</li>
<li><code>logb</code>: Computes the logarithm of <span class="math inline">\(z\)</span> with a complex base <span class="math inline">\(b\)</span>: <span class="math display">\[\log_b z = \frac{\log z}{\log b}\]</span></li>
<li><code>pow</code>: Computes the complex power <span class="math inline">\(z_1^{z_2}\)</span>. This is defined as <span class="math display">\[z_1^{z_2} = e^{z_2 \log z_1}\]</span> where <span class="math inline">\(\log z_1\)</span> is the principal value of the logarithm. Handles various edge cases, including <span class="math inline">\(0^0\)</span>.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Examples">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Examples
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceClojure">
<div class="sourceCode" id="cb12"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>(cplx/exp z1) <span class="co">;; =&gt; #vec2 [0.11662592901934625, -1.644591201830844]</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>(cplx/log z1) <span class="co">;; =&gt; #vec2 [0.45814536593707755, -1.2490457723982544]</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>(cplx/logb z1 z2) <span class="co">;; =&gt; #vec2 [-0.4446751692907921, -0.4944697164867257]</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>(cplx/pow z1 z2) <span class="co">;; =&gt; #vec2 [-3.571295577918147, 17.700466856264484]</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>(cplx/pow z3 z1) <span class="co">;; =&gt; #vec2 [1.761680541256831, -1.0235623709790516]</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>(cplx/pow cplx/ZERO cplx/ZERO) <span class="co">;; =&gt; #vec2 [NaN, NaN]</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>(cplx/pow cplx/ZERO (cplx/complex <span class="dv">1</span> <span class="dv">1</span>)) <span class="co">;; =&gt; #vec2 [0.0, 0.0]</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>(cplx/pow (cplx/complex <span class="dv">1</span> <span class="dv">1</span>) cplx/ZERO) <span class="co">;; =&gt; #vec2 [1.0, 0.0]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="clay-table">
<div class="table-responsive">
<table class="table table-hover clay-table caption-top" data-quarto-postprocess="true">
<tbody>
<tr class="odd">
<td><img src="complex_quaternions_files/5.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/6.png" class="clay-image img-fluid"></td>
</tr>
<tr class="even">
<td><img src="complex_quaternions_files/7.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/8.png" class="clay-image img-fluid"></td>
</tr>
<tr class="odd">
<td><img src="complex_quaternions_files/9.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/10.png" class="clay-image img-fluid"></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="trigonometric-and-hyperbolic" class="level3">
<h3 class="anchored" data-anchor-id="trigonometric-and-hyperbolic">Trigonometric and Hyperbolic</h3>
<p>Complex trigonometric and hyperbolic functions extend their real-valued counterparts to the complex plane. They are defined in terms of the complex exponential function:</p>
<p><span class="math display">\[ \sin z = \frac{e^{iz} - e^{-iz}}{2i} \quad \cos z = \frac{e^{iz} + e^{-iz}}{2} \]</span> <span class="math display">\[ \sinh z = \frac{e^{z} - e^{-z}}{2} \quad \cosh z = \frac{e^{z} + e^{-z}}{2} \]</span></p>
<p>This leads to relationships between complex trigonometric and hyperbolic functions, such as <span class="math inline">\(\sin(z) = -i \sinh(iz)\)</span> and <span class="math inline">\(\cos(z) = \cosh(iz)\)</span>. These functions are implemented using formulas that provide numerical stability, especially for large arguments.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Defined functions">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Defined functions
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><code>sin</code>, <code>cos</code>, <code>tan</code></li>
<li><code>sec</code>, <code>csc</code>, <code>cot</code></li>
<li><code>sinh</code>, <code>cosh</code>, <code>tanh</code></li>
<li><code>sech</code>, <code>csch</code>, <code>coth</code></li>
<li><code>asin</code>, <code>acos</code>, <code>atan</code></li>
<li><code>asec</code>, <code>acsc</code>, <code>acot</code></li>
<li><code>asinh</code>, <code>acosh</code>, <code>atanh</code></li>
<li><code>asech</code>, <code>acsch</code>, <code>acoth</code></li>
</ul>
</div>
</div>
<ul>
<li><strong>Standard Trigonometric Functions</strong>: <code>sin</code>, <code>cos</code>, <code>tan</code>, <code>sec</code>, <code>csc</code>, <code>cot</code>
<ul>
<li>These are the direct extensions of real trigonometric functions. For <span class="math inline">\(z = x + iy\)</span>: <span class="math display">\[ \sin z = \sin x \cosh y + i \cos x \sinh y \]</span> <span class="math display">\[ \cos z = \cos x \cosh y - i \sin x \sinh y \]</span> <span class="math display">\[ \tan z = \frac{\sin x \cos x + i \sinh y \cosh y}{\cos^2 x + \sinh^2 y} \]</span></li>
<li><code>sec(z)</code>, <code>csc(z)</code>, and <code>cot(z)</code> are computed as the reciprocals of <code>cos(z)</code>, <code>sin(z)</code>, and <code>tan(z)</code>, respectively.</li>
</ul></li>
<li><strong>Hyperbolic Trigonometric Functions</strong>: <code>sinh</code>, <code>cosh</code>, <code>tanh</code>, <code>sech</code>, <code>csch</code>, <code>coth</code>
<ul>
<li>These are also extensions of real hyperbolic functions. For <span class="math inline">\(z = x + iy\)</span>: <span class="math display">\[ \sinh z = \sinh x \cos y + i \cosh x \sin y \]</span> <span class="math display">\[ \cosh z = \cosh x \cos y + i \sinh x \sin y \]</span> <span class="math display">\[ \tanh z = \frac{\sinh x \cosh x + i \sin y \cos y}{\sinh^2 x + \cos^2 y} \]</span></li>
<li><code>sech(z)</code>, <code>csch(z)</code>, and <code>coth(z)</code> are computed as the reciprocals of <code>cosh(z)</code>, <code>sinh(z)</code>, and <code>tanh(z)</code>, respectively.</li>
</ul></li>
<li><strong>Inverse Trigonometric Functions</strong>: <code>asin</code>, <code>acos</code>, <code>atan</code>, <code>asec</code>, <code>acsc</code>, <code>acot</code>
<ul>
<li>These are the multi-valued inverse functions. The implementations return the principal values, which are related to complex logarithms. For example: <span class="math display">\[ \arcsin z = -i \log(iz + \sqrt{1-z^2}) \]</span> <span class="math display">\[ \arccos z = -i \log(z + i\sqrt{1-z^2}) \]</span> <span class="math display">\[ \arctan z = \frac{i}{2} \log\left(\frac{1-iz}{1+iz}\right) \]</span> <span class="math display">\[ \operatorname{arcsec} z = \arccos(1/z) \]</span> <span class="math display">\[ \operatorname{arccsc} z = \arcsin(1/z) \]</span> <span class="math display">\[ \operatorname{arccot} z = \operatorname{atan}(1/z) \]</span></li>
</ul></li>
<li><strong>Inverse Hyperbolic Trigonometric Functions</strong>: <code>asinh</code>, <code>acosh</code>, <code>atanh</code>, <code>asech</code>, <code>acsch</code>, <code>acoth</code>
<ul>
<li>These are the multi-valued inverse hyperbolic functions. The implementations return the principal values, which are also related to complex logarithms. For example: <span class="math display">\[ \operatorname{arsinh} z = \log(z + \sqrt{z^2+1}) \]</span> <span class="math display">\[ \operatorname{arcosh} z = \log(z + \sqrt{z^2-1}) \]</span> <span class="math display">\[ \operatorname{artanh} z = \frac{1}{2} \log\left(\frac{1+z}{1-z}\right) \]</span> <span class="math display">\[ \operatorname{arsech} z = \operatorname{arcosh}(1/z) \]</span> <span class="math display">\[ \operatorname{arcsch} z = \operatorname{arsinh}(1/z) \]</span> <span class="math display">\[ \operatorname{arcoth} z = \operatorname{artanh}(1/z) \]</span></li>
</ul></li>
</ul>
<p>These functions are continuous and analytic everywhere in the complex plane, except at certain points (poles) where the denominator is zero for tangent, cotangent, secant, cosecant, and at branch cuts for the inverse functions.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Examples">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Examples
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceClojure">
<div class="sourceCode" id="cb13"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>(cplx/sin z1) <span class="co">;; =&gt; #vec2 [1.1278052468056998, -1.868618519182647]</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>(cplx/cos z1) <span class="co">;; =&gt; #vec2 [2.0644336567607153, 1.0208309495976968]</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>(cplx/tan z1) <span class="co">;; =&gt; #vec2 [0.07932445480395665, -0.9443729864226214]</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>(cplx/sec z1) <span class="co">;; =&gt; #vec2 [0.38922334164348615, -0.1924650047020439]</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>(cplx/csc z1) <span class="co">;; =&gt; #vec2 [0.23675084882124306, 0.3922636659056108]</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>(cplx/cot z1) <span class="co">;; =&gt; #vec2 [0.08832153001414375, 1.0514849080401338]</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>(cplx/asin z1) <span class="co">;; =&gt; #vec2 [0.2734872901415567, -1.2264568712514057]</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>(cplx/acos z1) <span class="co">;; =&gt; #vec2 [1.2973090366533397, 1.2264568712514057]</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>(cplx/atan z1) <span class="co">;; =&gt; #vec2 [1.2767950250211129, -0.6412373393653842]</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>(cplx/asec z1) <span class="co">;; =&gt; #vec2 [1.3991340865479363, -0.5764844975630772]</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>(cplx/acsc z1) <span class="co">;; =&gt; #vec2 [0.17166224024696028, 0.5764844975630772]</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>(cplx/acot z1) <span class="co">;; =&gt; #vec2 [0.2940013017737837, 0.6412373393653842]</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>(cplx/sinh z1) <span class="co">;; =&gt; #vec2 [0.03686082371280443, -1.1248012470579227]</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>(cplx/cosh z1) <span class="co">;; =&gt; #vec2 [0.07976510530654181, -0.5197899547729212]</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>(cplx/tanh z1) <span class="co">;; =&gt; #vec2 [2.1247991277429965, -0.25514922181365146]</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>(cplx/sech z1) <span class="co">;; =&gt; #vec2 [0.28843542211554024, 1.8795917643457205]</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>(cplx/csch z1) <span class="co">;; =&gt; #vec2 [0.02910363957175099, 0.8880922016091114]</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>(cplx/coth z1) <span class="co">;; =&gt; #vec2 [0.46394286018382835, 0.05571098848654149]</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>(cplx/asinh z1) <span class="co">;; =&gt; #vec2 [1.0693110431581105, -1.1711572594583723]</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>(cplx/acosh z1) <span class="co">;; =&gt; #vec2 [-1.2264568712514057, 1.2973090366533397]</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>(cplx/atanh z1) <span class="co">;; =&gt; #vec2 [0.14694666622552977, -1.0172219678978514]</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>(cplx/asech z1) <span class="co">;; =&gt; #vec2 [0.5764844975630772, 1.3991340865479363]</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>(cplx/acsch z1) <span class="co">;; =&gt; #vec2 [0.24366128541928853, 0.6219473660246817]</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>(cplx/acoth z1) <span class="co">;; =&gt; #vec2 [0.14694666622552977, 0.5535743588970452]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="clay-table">
<div class="table-responsive">
<table class="table table-hover clay-table caption-top" data-quarto-postprocess="true">
<tbody>
<tr class="odd">
<td>sin</td>
<td>cos</td>
<td>tan</td>
</tr>
<tr class="even">
<td><img src="complex_quaternions_files/11.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/12.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/13.png" class="clay-image img-fluid"></td>
</tr>
<tr class="odd">
<td>sec</td>
<td>csc</td>
<td>cot</td>
</tr>
<tr class="even">
<td><img src="complex_quaternions_files/14.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/15.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/16.png" class="clay-image img-fluid"></td>
</tr>
<tr class="odd">
<td>asin</td>
<td>acos</td>
<td>atan</td>
</tr>
<tr class="even">
<td><img src="complex_quaternions_files/17.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/18.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/19.png" class="clay-image img-fluid"></td>
</tr>
<tr class="odd">
<td>asec</td>
<td>acsc</td>
<td>acot</td>
</tr>
<tr class="even">
<td><img src="complex_quaternions_files/20.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/21.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/22.png" class="clay-image img-fluid"></td>
</tr>
<tr class="odd">
<td>sinh</td>
<td>cosh</td>
<td>tanh</td>
</tr>
<tr class="even">
<td><img src="complex_quaternions_files/23.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/24.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/25.png" class="clay-image img-fluid"></td>
</tr>
<tr class="odd">
<td>sech</td>
<td>csch</td>
<td>coth</td>
</tr>
<tr class="even">
<td><img src="complex_quaternions_files/26.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/27.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/28.png" class="clay-image img-fluid"></td>
</tr>
<tr class="odd">
<td>asinh</td>
<td>acosh</td>
<td>atanh</td>
</tr>
<tr class="even">
<td><img src="complex_quaternions_files/29.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/30.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/31.png" class="clay-image img-fluid"></td>
</tr>
<tr class="odd">
<td>asech</td>
<td>acsch</td>
<td>acoth</td>
</tr>
<tr class="even">
<td><img src="complex_quaternions_files/32.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/33.png" class="clay-image img-fluid"></td>
<td><img src="complex_quaternions_files/34.png" class="clay-image img-fluid"></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="quaternions" class="level2">
<h2 class="anchored" data-anchor-id="quaternions">Quaternions</h2>
<div class="callout callout-style-default callout-tip callout-titled" title="Defined functions">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Defined functions
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><code>quaternion</code>, <code>complex-&gt;quaternion</code>, <code>ensure-quaternion</code></li>
</ul>
</div>
</div>
<p>Quaternions extend complex numbers with three imaginary units: <span class="math inline">\(i\)</span>, <span class="math inline">\(j\)</span>, and <span class="math inline">\(k\)</span>, satisfying the relations <span class="math inline">\(i^2 = j^2 = k^2 = ijk = -1\)</span>. They are particularly useful for representing 3D rotations concisely and avoiding gimbal lock.</p>
<p>In <code>fastmath</code>, quaternions are represented as 4-dimensional vectors using the <code>fastmath.vector/Vec4</code> type. A quaternion <span class="math inline">\(q = a + bi + cj + dk\)</span> corresponds to the vector <code>(Vec4. a b c d)</code>, where <span class="math inline">\(a\)</span> is the scalar (real) part, and <span class="math inline">\((b, c, d)\)</span> is the vector (imaginary) part.</p>
<p>You can create quaternions using the dedicated <code>quaternion</code> function, or by converting numbers or complex numbers using <code>ensure-quaternion</code>.</p>
<p>The implementation handles floating-point subtleties, including special values (<code>##Inf</code>, <code>##NaN</code>), for robust calculations across a wide range of inputs.</p>
<p>This section covers constants, creation, accessors, predicates, basic operations, and advanced functions including power, logarithms, trigonometric functions, and functions specific to 3D rotations.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Examples">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Examples
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceClojure">
<div class="sourceCode" id="cb14"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>(quat/quaternion <span class="fl">1.0</span> -<span class="fl">2.0</span> <span class="fl">3.0</span> -<span class="fl">4.0</span>) <span class="co">;; =&gt; #vec4 [1.0, -2.0, 3.0, -4.0]</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>(quat/quaternion <span class="fl">5.0</span> [<span class="fl">1.0</span> <span class="fl">2.0</span> <span class="fl">3.0</span>]) <span class="co">;; =&gt; #vec4 [5.0, 1.0, 2.0, 3.0]</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>(quat/quaternion <span class="fl">7.0</span>) <span class="co">;; =&gt; #vec4 [7.0, 0.0, 0.0, 0.0]</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>(quat/complex-&gt;quaternion (cplx/complex <span class="fl">1.0</span> -<span class="fl">2.0</span>)) <span class="co">;; =&gt; #vec4 [1.0, -2.0, 0.0, 0.0]</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>(quat/ensure-quaternion <span class="fl">5.0</span>) <span class="co">;; =&gt; #vec4 [5.0, 0.0, 0.0, 0.0]</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>(quat/ensure-quaternion (cplx/complex <span class="fl">1.0</span> -<span class="fl">2.0</span>)) <span class="co">;; =&gt; #vec4 [1.0, -2.0, 0.0, 0.0]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>We will use these quaternions to illustrate operations:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb15"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> q1 </span>(quat/quaternion <span class="fl">0.5</span> -<span class="fl">1.5</span> <span class="fl">2.0</span> -<span class="fl">0.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb16"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> q2 </span>(quat/quaternion -<span class="fl">0.5</span> <span class="fl">2.5</span> -<span class="fl">1.0</span> <span class="fl">1.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb17"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> q3 </span>(quat/quaternion <span class="fl">1.5</span> <span class="fl">0.0</span> <span class="fl">0.0</span> <span class="fl">0.0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb18"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> q4 </span>(quat/quaternion <span class="fl">0.0</span> <span class="fl">1.0</span> -<span class="fl">2.0</span> <span class="fl">3.0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="Examples">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Examples
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceClojure">
<div class="sourceCode" id="cb19"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>q1 <span class="co">;; =&gt; #vec4 [0.5, -1.5, 2.0, -0.5]</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>q2 <span class="co">;; =&gt; #vec4 [-0.5, 2.5, -1.0, 1.5]</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>q3 <span class="co">;; =&gt; #vec4 [1.5, 0.0, 0.0, 0.0]</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>q4 <span class="co">;; =&gt; #vec4 [0.0, 1.0, -2.0, 3.0]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>All of the trigonometric, hyperbolic, <code>exp</code>, <code>log</code> and <code>sqrt</code> functions are based on the following general formula. Let <span class="math inline">\(r_q\)</span> is the real part and <span class="math inline">\(v_q\)</span> is the vector (imaginary) part of quaternion <span class="math inline">\(q\)</span>. Let <span class="math inline">\(z_{in}\)</span> is defined as follows:</p>
<p><span class="math display">\[z_{in} = r_q + |v_q|i\]</span></p>
<p>Then, if <span class="math inline">\(f_z\)</span> is given operation on complex number, corresponding quaternion version <span class="math inline">\(f_q\)</span> is:</p>
<p><span class="math display">\[f_q(q) = \Re(f_z(z_{in})) + \frac{\Im(f_z(z_{in}))}{|v_q|}v_q\]</span></p>
<section id="constants-1" class="level3">
<h3 class="anchored" data-anchor-id="constants-1">Constants</h3>
<p>Predefined quaternion constants for common values.</p>
<div class="clay-table">
<div class="table-responsive">
<table class="table table-hover clay-table caption-top" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">constant</th>
<th data-quarto-table-cell-role="th">q</th>
<th data-quarto-table-cell-role="th">value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ZERO</td>
<td><span class="math inline">\(0+0i+0j+0k\)</span></td>
<td>#vec4 [0.0, 0.0, 0.0, 0.0]</td>
</tr>
<tr class="even">
<td>ONE</td>
<td><span class="math inline">\(1+0i+0j+0k\)</span></td>
<td>#vec4 [1.0, 0.0, 0.0, 0.0]</td>
</tr>
<tr class="odd">
<td>I</td>
<td><span class="math inline">\(0+i+0j+0k\)</span></td>
<td>#vec4 [0.0, 1.0, 0.0, 0.0]</td>
</tr>
<tr class="even">
<td>J</td>
<td><span class="math inline">\(0+0i+j+0k\)</span></td>
<td>#vec4 [0.0, 0.0, 1.0, 0.0]</td>
</tr>
<tr class="odd">
<td>K</td>
<td><span class="math inline">\(0+0i+0j+k\)</span></td>
<td>#vec4 [0.0, 0.0, 0.0, 1.0]</td>
</tr>
<tr class="even">
<td>-I</td>
<td><span class="math inline">\(0-i+0j+0k\)</span></td>
<td>#vec4 [0.0, -1.0, 0.0, 0.0]</td>
</tr>
<tr class="odd">
<td>-J</td>
<td><span class="math inline">\(0+0i-j+0k\)</span></td>
<td>#vec4 [0.0, 0.0, -1.0, 0.0]</td>
</tr>
<tr class="even">
<td>-K</td>
<td><span class="math inline">\(0+0i+0j-k\)</span></td>
<td>#vec4 [0.0, 0.0, 0.0, -1.0]</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="basic-operations-1" class="level3">
<h3 class="anchored" data-anchor-id="basic-operations-1">Basic operations</h3>
<p>Functions to create quaternions and access their scalar and vector components.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Defined functions">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Defined functions
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><code>scalar</code>, <code>re</code>, <code>vector</code>, <code>im-i</code>, <code>im-j</code>, <code>im-k</code></li>
<li><code>delta-eq</code>, <code>qsgn</code>, <code>arg</code>, <code>norm</code>, <code>normalize</code>, <code>conjugate</code>, <code>reciprocal</code></li>
<li><code>add</code>, <code>adds</code>, <code>sub</code>, <code>scale</code>, <code>mult</code>, <code>div</code>, <code>neg</code>, <code>sq</code>, <code>sqrt</code></li>
</ul>
</div>
</div>
<ul>
<li><p><strong>Components</strong></p></li>
<li><p><code>scalar</code>, <code>re</code>: Returns the scalar (real) part <span class="math inline">\(a\)</span> of a quaternion <span class="math inline">\(a+bi+cj+dk\)</span>.</p></li>
<li><p><code>im-i</code>, <code>im-j</code>, <code>im-k</code>: Return the coefficients of the <span class="math inline">\(i\)</span>, <span class="math inline">\(j\)</span>, and <span class="math inline">\(k\)</span> components, respectively.</p></li>
<li><p><code>vector</code>: Returns the vector (imaginary) part <span class="math inline">\((b, c, d)\)</span> as a <code>Vec3</code>.</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Examples">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Examples
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceClojure">
<div class="sourceCode" id="cb20"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>(quat/scalar q1) <span class="co">;; =&gt; 0.5</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>(quat/re q1) <span class="co">;; =&gt; 0.5</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>(quat/vector q1) <span class="co">;; =&gt; #vec3 [-1.5, 2.0, -0.5]</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>(quat/im-i q1) <span class="co">;; =&gt; -1.5</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>(quat/im-j q1) <span class="co">;; =&gt; 2.0</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>(quat/im-k q1) <span class="co">;; =&gt; -0.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<ul>
<li><p><strong>Properties and Comparisons</strong></p></li>
<li><p><code>arg</code>: Computes the argument <span class="math inline">\(\theta\)</span> such that <span class="math inline">\(q = |q| (\cos \theta + \mathbf{v} \sin \theta)\)</span>, where <span class="math inline">\(\mathbf{v}\)</span> is a unit 3D vector. Calculated as: <span class="math display">\[\operatorname{arg}(z)=\operatorname{atan2}(|v|, \operatorname{re}(q))\]</span></p></li>
<li><p><code>norm</code>: Calculates the magnitude (Euclidean norm) of the quaternion: <span class="math display">\[|q| = \sqrt{a^2+b^2+c^2+d^2}\]</span></p></li>
<li><p><code>normalize</code>: Returns the unit quaternion: <span class="math display">\[\hat{q} = q / |q|\]</span></p></li>
<li><p><code>conjugate</code>: Returns the conjugate: <span class="math display">\[\bar{q} = a - bi - cj - dk\]</span></p></li>
<li><p><code>delta-eq</code>: Checks if two quaternions are approximately equal within a tolerance.</p></li>
<li><p><code>qsgn</code>: Computes the complex signum, returning the sign of the scalar part or 0 for zero.</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Examples">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Examples
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceClojure">
<div class="sourceCode" id="cb21"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>q1 <span class="co">;; =&gt; #vec4 [0.5, -1.5, 2.0, -0.5]</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>(quat/arg q1) <span class="co">;; =&gt; 1.37713802635057</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>(quat/norm q1) <span class="co">;; =&gt; 2.598076211353316</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>(quat/normalize q1) <span class="co">;; =&gt; #vec4 [0.19245008972987526, -0.5773502691896257, 0.769800358919501, -0.19245008972987526]</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>(quat/norm (quat/normalize q1)) <span class="co">;; =&gt; 1.0</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>(quat/conjugate q1) <span class="co">;; =&gt; #vec4 [0.5, 1.5, -2.0, 0.5]</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>(quat/qsgn q1) <span class="co">;; =&gt; 1.0</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>q2 <span class="co">;; =&gt; #vec4 [-0.5, 2.5, -1.0, 1.5]</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>(quat/arg q2) <span class="co">;; =&gt; 1.7316168074693612</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>(quat/norm q2) <span class="co">;; =&gt; 3.122498999199199</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>(quat/normalize q2) <span class="co">;; =&gt; #vec4 [-0.16012815380508713, 0.8006407690254357, -0.32025630761017426, 0.48038446141526137]</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>(quat/conjugate q2) <span class="co">;; =&gt; #vec4 [-0.5, -2.5, 1.0, -1.5]</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>(quat/qsgn q2) <span class="co">;; =&gt; -1.0</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>(quat/qsgn quat/ZERO) <span class="co">;; =&gt; 0.0</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>(quat/delta-eq (quat/quaternion <span class="fl">1.0000001</span>) quat/ONE) <span class="co">;; =&gt; true</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>(quat/delta-eq (quat/quaternion <span class="fl">1.0001</span>) quat/ONE) <span class="co">;; =&gt; false</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<ul>
<li><strong>Arithemtic Operations</strong></li>
</ul>
<p>Basic arithmetic extended to quaternions.</p>
<ul>
<li><code>add</code>: Sum of two quaternions: <span class="math display">\[q_1 + q_2 = (a_1+a_2) + (b_1+b_2)i + (c_1+c_2)j + (d_1+d_2)k\]</span></li>
<li><code>adds</code>: Adds a real scalar <span class="math inline">\(s\)</span> to a quaternion: <span class="math inline">\(q = a+bi+cj+dk\)</span>: <span class="math display">\[q+s = (a+s)+bi+cj+dk\]</span></li>
<li><code>sub</code>: Difference of two quaternions: <span class="math inline">\(q_1 - q_2 = (a_1-a_2) + (b_1-b_2)i + (c_1-c_2)j + (d_1-d_2)k\)</span>$</li>
<li><code>scale</code>: Multiplies a quaternion <span class="math inline">\(q\)</span> by a real scalar <span class="math inline">\(s\)</span>: <span class="math display">\[q \cdot s = (as) + (bs)i + (cs)j + (ds)k\]</span></li>
<li><code>mult</code>: Quaternion multiplication. Note that quaternion multiplication is non-commutative (<span class="math inline">\(q_1 q_2 \neq q_2 q_1\)</span> in general). If <span class="math inline">\(q_1 = a_1 + \mathbf{v}_1\)</span> and <span class="math inline">\(q_2 = a_2 + \mathbf{v}_2\)</span>, where <span class="math inline">\(\mathbf{v}_1, \mathbf{v}_2\)</span> are vector parts: <span class="math display">\[ q_1 q_2 = (a_1 a_2 - \mathbf{v}_1 \cdot \mathbf{v}_2) + (a_1 \mathbf{v}_2 + a_2 \mathbf{v}_1 + \mathbf{v}_1 \times \mathbf{v}_2) \]</span></li>
<li><code>div</code>: Quaternion division <span class="math display">\[q_1 / q_2 = q_1 \cdot q_2^{-1}\]</span></li>
<li><code>reciprocal</code>: Returns the reciprocal: <span class="math display">\[q^{-1} = \bar{q} / |q|^2\]</span></li>
<li><code>neg</code>: Negation: <span class="math display">\[-q = -a - bi - cj - dk\]</span></li>
<li><code>sq</code>: Square of a quaternion: <span class="math display">\[q^2 = q \cdot q\]</span></li>
<li><code>sqrt</code>: Computes the principal square root of a quaternion.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Examples">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Examples
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceClojure">
<div class="sourceCode" id="cb22"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>(quat/add q1 q2) <span class="co">;; =&gt; #vec4 [0.0, 1.0, 1.0, 1.0]</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>(quat/adds q1 <span class="fl">5.0</span>) <span class="co">;; =&gt; #vec4 [5.5, -1.5, 2.0, -0.5]</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>(quat/sub q1 q2) <span class="co">;; =&gt; #vec4 [1.0, -4.0, 3.0, -2.0]</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>(quat/scale q1 <span class="fl">3.0</span>) <span class="co">;; =&gt; #vec4 [1.5, -4.5, 6.0, -1.5]</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>(quat/mult q1 q2) <span class="co">;; =&gt; #vec4 [6.25, 4.5, -0.5, -2.5]</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>(quat/mult q2 q1) <span class="co">;; =&gt; #vec4 [6.25, -0.5, -2.5, 4.5]</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>(quat/div q1 q2) <span class="co">;; =&gt; #vec4 [-0.6923076923076922, -0.3076923076923077, -0.15384615384615385, 0.30769230769230765]</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>(quat/reciprocal q1) <span class="co">;; =&gt; #vec4 [0.07407407407407407, 0.2222222222222222, -0.2962962962962963, 0.07407407407407407]</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>(quat/mult q1 (quat/reciprocal q1)) <span class="co">;; =&gt; #vec4 [0.9999999999999998, 0.0, 0.0, 0.0]</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>(quat/neg q1) <span class="co">;; =&gt; #vec4 [-0.5, 1.5, -2.0, 0.5]</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>(quat/sq q1) <span class="co">;; =&gt; #vec4 [-6.25, -1.5, 2.0, -0.5]</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>(quat/sqrt q1) <span class="co">;; =&gt; #vec4 [1.2446035937906728, -0.6026015060070129, 0.8034686746760172, -0.2008671686690043]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="predicates-1" class="level3">
<h3 class="anchored" data-anchor-id="predicates-1">Predicates</h3>
<p>Functions to check the type or state of a quaternion and compute fundamental properties.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Defined functions">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Defined functions
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><code>real?</code>, <code>imaginary?</code></li>
<li><code>zero?</code></li>
<li><code>inf?</code>, <code>nan?</code></li>
<li><code>invalid?</code>, <code>valid?</code></li>
</ul>
</div>
</div>
<ul>
<li><code>real?</code>: Checks if the quaternion has a zero vector part (<span class="math inline">\(b=c=d=0\)</span>).</li>
<li><code>imaginary?</code>: Checks if the quaternion has a zero scalar part (<span class="math inline">\(a=0\)</span>).</li>
<li><code>zero?</code>: Checks if all components are zero (<span class="math inline">\(a=b=c=d=0\)</span>).</li>
<li><code>inf?</code>, <code>nan?</code>: Checks if any component is infinite or NaN, respectively.</li>
<li><code>invalid?</code>, <code>valid?</code>: Checks if the quaternion is not a finite, non-NaN value.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Examples">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Examples
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceClojure">
<div class="sourceCode" id="cb23"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>(quat/real? q3) <span class="co">;; =&gt; true</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>(quat/real? q1) <span class="co">;; =&gt; false</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>(quat/imaginary? q4) <span class="co">;; =&gt; true</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>(quat/imaginary? q1) <span class="co">;; =&gt; false</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>(quat/zero? quat/ZERO) <span class="co">;; =&gt; true</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>(quat/zero? q1) <span class="co">;; =&gt; false</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>(quat/inf? (quat/quaternion <span class="at">##</span>Inf <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>)) <span class="co">;; =&gt; true</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>(quat/nan? (quat/quaternion <span class="dv">1</span> <span class="at">##</span>NaN <span class="dv">2</span> <span class="dv">3</span>)) <span class="co">;; =&gt; true</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>(quat/invalid? (quat/quaternion <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span>)) <span class="co">;; =&gt; false</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>(quat/valid? (quat/quaternion <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span>)) <span class="co">;; =&gt; true</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="power-and-logarithms-1" class="level3">
<h3 class="anchored" data-anchor-id="power-and-logarithms-1">Power and Logarithms</h3>
<p>Extensions of exponential, logarithm, and power functions to quaternions.</p>
<ul>
<li><code>exp</code>: Computes the quaternion exponential <span class="math inline">\(e^q\)</span>.</li>
<li><code>log</code>: Computes the principal value of the quaternion natural logarithm <span class="math inline">\(\log q\)</span>.</li>
<li><code>logb</code>: Computes the logarithm of <span class="math inline">\(q\)</span> with a quaternion base <span class="math inline">\(b\)</span>: <span class="math inline">\(\log_b q = (\log q) (\log b)^{-1}\)</span>.</li>
<li><code>pow</code>: Computes the quaternion power <span class="math inline">\(q_1^{q_2}\)</span> defined as <span class="math inline">\(e^{(\log q_1) q_2}\)</span>.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Examples">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Examples
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceClojure">
<div class="sourceCode" id="cb24"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>(quat/exp q1) <span class="co">;; =&gt; #vec4 [-1.3680759934546958, -0.5413604352188154, 0.7218139136250872, -0.1804534784062718]</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>(quat/log q1) <span class="co">;; =&gt; #vec4 [0.9547712524422192, -0.8102369618391012, 1.0803159491188017, -0.2700789872797004]</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>(quat/logb q1 q2) <span class="co">;; =&gt; #vec4 [-0.20614694633615405, -0.7036653773111262, 0.3406342086858799, -0.011638982288984245]</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>(quat/pow q1 q2) <span class="co">;; =&gt; #vec4 [-9.0178461035907, -18.182612909089467, 4.1908222233068875, 1.419324015861925]</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>(quat/pow q3 q1) <span class="co">;; =&gt; #vec4 [0.6265933369573483, -0.6191317465962343, 0.8255089954616457, -0.20637724886541142]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="trigonometric-and-hyperbolic-1" class="level3">
<h3 class="anchored" data-anchor-id="trigonometric-and-hyperbolic-1">Trigonometric and Hyperbolic</h3>
<p>Extensions of standard and hyperbolic trigonometric functions to quaternions.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Defined functions">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Defined functions
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><code>sin</code>, <code>cos</code>, <code>tan</code></li>
<li><code>sec</code>, <code>csc</code>, <code>cot</code></li>
<li><code>sinh</code>, <code>cosh</code>, <code>tanh</code></li>
<li><code>sech</code>, <code>csch</code>, <code>coth</code></li>
<li><code>asin</code>, <code>acos</code>, <code>atan</code></li>
<li><code>asec</code>, <code>acsc</code>, <code>acot</code></li>
<li><code>asinh</code>, <code>acosh</code>, <code>atanh</code></li>
<li><code>asech</code>, <code>acsch</code>, <code>acoth</code></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="Examples">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Examples
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceClojure">
<div class="sourceCode" id="cb25"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>(quat/sin q1) <span class="co">;; =&gt; #vec4 [3.087247974413335, -3.2845213397125193, 4.379361786283359, -1.0948404465708397]</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>(quat/cos q1) <span class="co">;; =&gt; #vec4 [5.651169511045248, 1.7943421858300115, -2.3924562477733486, 0.5981140619433372]</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>(quat/tan q1) <span class="co">;; =&gt; #vec4 [0.010202871653497671, -0.5844504887495585, 0.7792673183327447, -0.19481682958318616]</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>(quat/sec q1) <span class="co">;; =&gt; #vec4 [0.1370413436810704, -0.043512951379207854, 0.05801726850561047, -0.014504317126402617]</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>(quat/csc q1) <span class="co">;; =&gt; #vec4 [0.07585997324070858, 0.08070738178603104, -0.10760984238137472, 0.02690246059534368]</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>(quat/cot q1) <span class="co">;; =&gt; #vec4 [0.010338328329859864, 0.5922098454672464, -0.7896131272896618, 0.19740328182241546]</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>(quat/asin q1) <span class="co">;; =&gt; #vec4 [0.18096798983808618, -0.9889006571112673, 1.3185342094816896, -0.3296335523704224]</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>(quat/acos q1) <span class="co">;; =&gt; #vec4 [1.3898283369568103, 0.9889006571112673, -1.3185342094816896, 0.3296335523704224]</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>(quat/atan q1) <span class="co">;; =&gt; #vec4 [1.484700919533427, -0.23215315248464086, 0.3095375366461878, -0.07738438416154696]</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>(quat/asec q1) <span class="co">;; =&gt; #vec4 [1.5014657553875428, -0.2177519631502909, 0.29033595086705455, -0.07258398771676364]</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>(quat/acsc q1) <span class="co">;; =&gt; #vec4 [0.0693305714073537, 0.2177519631502909, -0.29033595086705455, 0.07258398771676364]</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>(quat/acot q1) <span class="co">;; =&gt; #vec4 [0.08609540726146947, 0.23215315248464086, -0.3095375366461878, 0.07738438416154696]</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>(quat/sinh q1) <span class="co">;; =&gt; #vec4 [-0.43239448075125825, -0.3702579047997209, 0.4936772063996279, -0.12341930159990698]</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>(quat/cosh q1) <span class="co">;; =&gt; #vec4 [-0.9356815127034374, -0.17110253041909437, 0.22813670722545917, -0.05703417680636479]</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>(quat/tanh q1) <span class="co">;; =&gt; #vec4 [0.6120359971326302, 0.28378993640212685, -0.37838658186950247, 0.09459664546737562]</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>(quat/sech q1) <span class="co">;; =&gt; #vec4 [-0.9745918753714102, 0.17821783773427158, -0.23762378364569542, 0.059405945911423855]</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>(quat/csch q1) <span class="co">;; =&gt; #vec4 [-0.7416646097306075, 0.6350848511892305, -0.8467798015856407, 0.21169495039641018]</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>(quat/coth q1) <span class="co">;; =&gt; #vec4 [1.00788189192935, -0.46733646280857977, 0.623115283744773, -0.15577882093619325]</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>(quat/asinh q1) <span class="co">;; =&gt; #vec4 [1.6120874585828928, -0.8010575888838687, 1.0680767851784916, -0.2670191962946229]</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>(quat/acosh q1) <span class="co">;; =&gt; #vec4 [1.6808079158716929, -0.8177032858484982, 1.0902710477979976, -0.2725677619494994]</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>(quat/atanh q1) <span class="co">;; =&gt; #vec4 [0.0648777988712712, -0.7107620150571328, 0.9476826867428436, -0.2369206716857109]</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>(quat/asech q1) <span class="co">;; =&gt; #vec4 [-0.3701071697421568, -0.8833849829668168, 1.1778466439557558, -0.29446166098893894]</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>(quat/acsch q1) <span class="co">;; =&gt; #vec4 [0.07987279637814454, 0.22711377640869046, -0.3028183685449206, 0.07570459213623015]</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>(quat/acoth q1) <span class="co">;; =&gt; #vec4 [0.0648777988712712, 0.2134134990436804, -0.2845513320582405, 0.07113783301456013]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="rotation-functions" class="level3">
<h3 class="anchored" data-anchor-id="rotation-functions">Rotation Functions</h3>
<p>Functions specifically for using quaternions to represent and manipulate 3D rotations.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Defined functions">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Defined functions
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><code>rotation-quaternion</code>, <code>rotate</code></li>
<li><code>slerp</code></li>
<li><code>to-euler</code>, <code>from-euler</code></li>
<li><code>to-angles</code>, <code>from-angles</code></li>
<li><code>to-rotation-matrix</code>, <code>from-rotation-matrix</code></li>
</ul>
</div>
</div>
<ul>
<li><code>rotation-quaternion</code>: Creates a unit quaternion representing a rotation by a given <code>angle</code> around a <code>u</code> (Vec3) axis.</li>
<li><code>rotate</code>: Rotates a 3D vector <code>in</code> (Vec3) using a quaternion <code>rotq</code>. Can also create the rotation quaternion directly from angle and axis.</li>
<li><code>to-euler</code>, <code>from-euler</code>: Converts between a quaternion and ZYX (body 3-2-1) Euler angles [roll pitch yaw].</li>
<li><code>to-angles</code>, <code>from-angles</code>: Converts between a quaternion and Tait-Bryan angles (z-yâ€™-xâ€™â€™ intrinsic) [x y z].</li>
<li><code>to-rotation-matrix</code>, <code>from-rotation-matrix</code>: Converts between a quaternion and a 3x3 rotation matrix.</li>
</ul>
<div class="sourceClojure">
<div class="sourceCode" id="cb26"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> rot-q </span>(quat/rotation-quaternion m/HALF_PI (v/vec3 <span class="dv">1</span> <span class="dv">1</span> <span class="dv">0</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb27"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>rot-q</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb28"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">0.7071067811865476</span> <span class="fl">0.4999999999999999</span> <span class="fl">0.4999999999999999</span> <span class="fl">0.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="Examples">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Examples
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceClojure">
<div class="sourceCode" id="cb29"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>(quat/rotate (v/vec3 <span class="dv">1</span> <span class="dv">0</span> <span class="dv">0</span>) rot-q) <span class="co">;; =&gt; #vec3 [0.5000000000000002, 0.4999999999999998, -0.7071067811865475]</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>(quat/rotate (v/vec3 <span class="dv">1</span> <span class="dv">0</span> <span class="dv">0</span>) m/HALF_PI (v/vec3 <span class="dv">1</span> <span class="dv">1</span> <span class="dv">0</span>)) <span class="co">;; =&gt; #vec3 [0.5000000000000002, 0.4999999999999998, -0.7071067811865475]</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>(quat/from-euler m/HALF_PI <span class="dv">1</span> m/HALF_PI) <span class="co">;; =&gt; #vec4 [0.6785040502472879, 0.19907851164308485, 0.6785040502472878, 0.19907851164308485]</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>(quat/to-euler (quat/from-euler m/HALF_PI <span class="dv">1</span> m/HALF_PI)) <span class="co">;; =&gt; #vec3 [1.570796326794897, 1.0000000000000004, 1.570796326794897]</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>(quat/from-angles m/HALF_PI <span class="dv">1</span> m/HALF_PI) <span class="co">;; =&gt; #vec4 [0.199078511643085, 0.6785040502472878, -0.19907851164308474, 0.6785040502472878]</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>(quat/to-angles (quat/from-angles m/HALF_PI <span class="dv">1</span> m/HALF_PI)) <span class="co">;; =&gt; #vec3 [1.5707963267948963, 1.0000000000000002, 1.5707963267948963]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>For a rotation quaternion <code>rot-q</code> conversion between rotation matrix and back looks as follows</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb30"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>(quat/to-rotation-matrix rot-q)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb31"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>#mat3x3 [[<span class="fl">0.5000000000000002</span>, <span class="fl">0.5</span>, <span class="fl">0.7071067811865477</span>]</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>         [<span class="fl">0.5</span>, <span class="fl">0.5000000000000002</span>, -<span class="fl">0.7071067811865477</span>]</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>         [-<span class="fl">0.7071067811865477</span>, <span class="fl">0.7071067811865477</span>, <span class="fl">2.220446049250313E-16</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb32"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>(quat/from-rotation-matrix (mat/rows-&gt;mat3x3</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>                            [<span class="fl">0.5</span> <span class="fl">0.5</span> m/SQRT2_2]</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>                            [<span class="fl">0.5</span> <span class="fl">0.5</span> (<span class="kw">-</span> m/SQRT2_2)]</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>                            [(<span class="kw">-</span> m/SQRT2_2) m/SQRT2_2 <span class="fl">0.0</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb33"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">0.7071067811865475</span> <span class="fl">0.5</span> <span class="fl">0.5</span> <span class="fl">0.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="slerp" class="level4">
<h4 class="anchored" data-anchor-id="slerp">Slerp</h4>
<p><code>slerp</code> function performs Spherical Linear Interpolation between two unit quaternions <code>q1</code> and <code>q2</code> based on a parameter <code>t</code> in [0, 1]. Useful for animating rotations.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb34"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>(quat/slerp quat/ONE (quat/quaternion <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">1</span>) <span class="fl">0.0</span>) <span class="co">;; =&gt; #vec4 [1.0, 0.0, 0.0, 0.0]</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>(quat/slerp quat/ONE (quat/quaternion <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">1</span>) <span class="fl">0.5</span>) <span class="co">;; =&gt; #vec4 [0.7071067811865476, 0.0, 0.0, 0.7071067811865475]</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>(quat/slerp quat/ONE (quat/quaternion <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">1</span>) <span class="fl">1.0</span>) <span class="co">;; =&gt; #vec4 [0.0, 0.0, 0.0, 1.0]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Letâ€™s see how quaternion components changes for different <code>t</code>.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb35"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> q-start </span>(quat/quaternion -<span class="dv">1</span> -<span class="dv">2</span> -<span class="dv">3</span> -<span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb36"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> q-end </span>(quat/quaternion <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-image">
<img class="clay-image" src="complex_quaternions_files/35.png">
</div>
</section>
</section>
</section>
<section id="reference" class="level2">
<h2 class="anchored" data-anchor-id="reference">Reference</h2>
<section id="fastmath.complex" class="level3">
<h3 class="anchored" data-anchor-id="fastmath.complex">fastmath.complex</h3>
<p>Complex numbers operations.</p>
<p>Complex numbers are represented using the <a href="#LOS-Vec2">Vec2</a> type defined in the <code>fastmath.vector</code> namespace. A complex number <span class="math inline">\(z = a + bi\)</span> corresponds to the vector <code>(Vec2. a b)</code>.</p>
<p>To create a complex number, use <a href="#LOS-complex">complex</a>, <a href="#LOS-vec2">vec2</a>, or convert from sequences/arrays using functions like <a href="#LOS-fastmath.vector/seq-%3Evec2">fastmath.vector/seq-&gt;vec2</a>.</p>
<p>The implementation correctly handles floating-point special values such as <code>##Inf</code>, <code>##NaN</code>, and distinguishes between <code>+0.0</code> and <code>-0.0</code> where necessary.</p>
<p>This namespace provides standard complex number operations like arithmetic (+, -, *, /), exponentiation (pow, exp, log), trigonometric functions (sin, cos, tan, etc.), and their inverses, as well as utility functions like <code>abs</code>, <code>arg</code>, <code>conjugate</code>, etc.</p>
<span id="#LOS--I"></span>
<section id="i" class="level4">
<h4 class="anchored" data-anchor-id="i">-I</h4>
<p>z=0-i</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L27">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-I"></span>
</section>
<section id="i-1" class="level4">
<h4 class="anchored" data-anchor-id="i-1">I</h4>
<p>z=0+i</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L25">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-I-"></span>
</section>
<section id="i-" class="level4">
<h4 class="anchored" data-anchor-id="i-">I-</h4>
<p>z=0-i</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L26">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-ONE"></span>
</section>
<section id="one" class="level4">
<h4 class="anchored" data-anchor-id="one">ONE</h4>
<p>z=1+0i</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L28">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-PI"></span>
</section>
<section id="pi" class="level4">
<h4 class="anchored" data-anchor-id="pi">PI</h4>
<p>z=pi+0i</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L31">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-TWO"></span>
</section>
<section id="two" class="level4">
<h4 class="anchored" data-anchor-id="two">TWO</h4>
<p>z=2+0i</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L29">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-ZERO"></span>
</section>
<section id="zero" class="level4">
<h4 class="anchored" data-anchor-id="zero">ZERO</h4>
<p>z=0+0i</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L30">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-abs"></span>
</section>
<section id="abs" class="level4">
<h4 class="anchored" data-anchor-id="abs">abs</h4>
<ul>
<li><code>(abs z)</code></li>
</ul>
<p>Calculates the magnitude (absolute value) of the complex number <code>z</code>.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L82">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-acos"></span>
</section>
<section id="acos" class="level4">
<h4 class="anchored" data-anchor-id="acos">acos</h4>
<ul>
<li><code>(acos z)</code></li>
</ul>
<p>acos(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L565">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-acosh"></span>
</section>
<section id="acosh" class="level4">
<h4 class="anchored" data-anchor-id="acosh">acosh</h4>
<ul>
<li><code>(acosh z)</code></li>
</ul>
<p>acosh(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L713">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-acot"></span>
</section>
<section id="acot" class="level4">
<h4 class="anchored" data-anchor-id="acot">acot</h4>
<ul>
<li><code>(acot z)</code></li>
</ul>
<p>acot(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L665">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-acoth"></span>
</section>
<section id="acoth" class="level4">
<h4 class="anchored" data-anchor-id="acoth">acoth</h4>
<ul>
<li><code>(acoth z)</code></li>
</ul>
<p>acoth(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L834">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-acsc"></span>
</section>
<section id="acsc" class="level4">
<h4 class="anchored" data-anchor-id="acsc">acsc</h4>
<ul>
<li><code>(acsc z)</code></li>
</ul>
<p>acsc(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L638">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-acsch"></span>
</section>
<section id="acsch" class="level4">
<h4 class="anchored" data-anchor-id="acsch">acsch</h4>
<ul>
<li><code>(acsch z)</code></li>
</ul>
<p>acsch(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L800">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-add"></span>
</section>
<section id="add" class="level4">
<h4 class="anchored" data-anchor-id="add">add</h4>
<ul>
<li><code>(add z1 z2)</code></li>
</ul>
<p>Sum of two complex numbers.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L107">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-adds"></span>
</section>
<section id="adds" class="level4">
<h4 class="anchored" data-anchor-id="adds">adds</h4>
<ul>
<li><code>(adds z v)</code></li>
</ul>
<p>Add scalar to complex number.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L113">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-arg"></span>
</section>
<section id="arg" class="level4">
<h4 class="anchored" data-anchor-id="arg">arg</h4>
<ul>
<li><code>(arg z)</code></li>
</ul>
<p>Argument (angle) of the complex number.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L102">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-asec"></span>
</section>
<section id="asec" class="level4">
<h4 class="anchored" data-anchor-id="asec">asec</h4>
<ul>
<li><code>(asec z)</code></li>
</ul>
<p>asec(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L612">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-asech"></span>
</section>
<section id="asech" class="level4">
<h4 class="anchored" data-anchor-id="asech">asech</h4>
<ul>
<li><code>(asech z)</code></li>
</ul>
<p>asech(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L765">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-asin"></span>
</section>
<section id="asin" class="level4">
<h4 class="anchored" data-anchor-id="asin">asin</h4>
<ul>
<li><code>(asin z)</code></li>
</ul>
<p>asin(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L544">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-asinh"></span>
</section>
<section id="asinh" class="level4">
<h4 class="anchored" data-anchor-id="asinh">asinh</h4>
<ul>
<li><code>(asinh z)</code></li>
</ul>
<p>asinh(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L690">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-atan"></span>
</section>
<section id="atan" class="level4">
<h4 class="anchored" data-anchor-id="atan">atan</h4>
<ul>
<li><code>(atan z)</code></li>
</ul>
<p>atan(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L585">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-atanh"></span>
</section>
<section id="atanh" class="level4">
<h4 class="anchored" data-anchor-id="atanh">atanh</h4>
<ul>
<li><code>(atanh z)</code></li>
</ul>
<p>atanh(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L739">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-complex"></span>
</section>
<section id="complex" class="level4">
<h4 class="anchored" data-anchor-id="complex">complex</h4>
<ul>
<li><code>(complex a b)</code></li>
<li><code>(complex a)</code></li>
<li><code>(complex)</code></li>
</ul>
<p>Creates a complex number represented as a <a href="#LOS-Vec2">Vec2</a>. Takes optional real and imaginary parts.</p>
<p>Examples:</p>
<p>(complex 1 2) ;; =&gt; #vec2 [1.0, 2.0] (complex 3) ;; =&gt; #vec2 [3.0, 0.0] (complex) ;; =&gt; #vec2 [0.0, 0.0]</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L33">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-conjugate"></span>
</section>
<section id="conjugate" class="level4">
<h4 class="anchored" data-anchor-id="conjugate">conjugate</h4>
<ul>
<li><code>(conjugate z)</code></li>
</ul>
<p>Complex conjugate.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L161">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-cos"></span>
</section>
<section id="cos" class="level4">
<h4 class="anchored" data-anchor-id="cos">cos</h4>
<ul>
<li><code>(cos z)</code></li>
</ul>
<p>cos(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L394">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-cosh"></span>
</section>
<section id="cosh" class="level4">
<h4 class="anchored" data-anchor-id="cosh">cosh</h4>
<ul>
<li><code>(cosh z)</code></li>
</ul>
<p>cosh(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L475">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-cot"></span>
</section>
<section id="cot" class="level4">
<h4 class="anchored" data-anchor-id="cot">cot</h4>
<ul>
<li><code>(cot z)</code></li>
</ul>
<p>csc(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L448">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-coth"></span>
</section>
<section id="coth" class="level4">
<h4 class="anchored" data-anchor-id="coth">coth</h4>
<ul>
<li><code>(coth z)</code></li>
</ul>
<p>coth(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L528">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-csc"></span>
</section>
<section id="csc" class="level4">
<h4 class="anchored" data-anchor-id="csc">csc</h4>
<ul>
<li><code>(csc z)</code></li>
</ul>
<p>csc(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L434">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-csch"></span>
</section>
<section id="csch" class="level4">
<h4 class="anchored" data-anchor-id="csch">csch</h4>
<ul>
<li><code>(csch z)</code></li>
</ul>
<p>csch(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L514">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-csgn"></span>
</section>
<section id="csgn" class="level4">
<h4 class="anchored" data-anchor-id="csgn">csgn</h4>
<ul>
<li><code>(csgn re im)</code></li>
<li><code>(csgn z)</code></li>
</ul>
<p>Complex signum function.</p>
<p>Returns <code>0.0</code> for the zero. For any other vector, returns the sign of the real part.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L70">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-delta-eq"></span>
</section>
<section id="delta-eq" class="level4">
<h4 class="anchored" data-anchor-id="delta-eq">delta-eq</h4>
<ul>
<li><code>(delta-eq q1 q2)</code></li>
<li><code>(delta-eq q1 q2 accuracy)</code></li>
</ul>
<p>Compare complex numbers with given accuracy (10e-6 by default)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L63">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-div"></span>
</section>
<section id="div" class="level4">
<h4 class="anchored" data-anchor-id="div">div</h4>
<ul>
<li><code>(div z1 z2)</code></li>
</ul>
<p>Division of two complex numbers.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L166">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-ensure-complex"></span>
</section>
<section id="ensure-complex" class="level4">
<h4 class="anchored" data-anchor-id="ensure-complex">ensure-complex</h4>
<ul>
<li><code>(ensure-complex v)</code></li>
</ul>
<p>Convert possible number to complex or return input.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L46">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-exp"></span>
</section>
<section id="exp" class="level4">
<h4 class="anchored" data-anchor-id="exp">exp</h4>
<ul>
<li><code>(exp z)</code></li>
</ul>
<p>exp(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L218">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-flip"></span>
</section>
<section id="flip" class="level4">
<h4 class="anchored" data-anchor-id="flip">flip</h4>
<ul>
<li><code>(flip z)</code></li>
</ul>
<p>Exchange imaginary and real parts</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L80">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-im"></span>
</section>
<section id="im" class="level4">
<h4 class="anchored" data-anchor-id="im">im</h4>
<ul>
<li><code>(im z)</code></li>
</ul>
<p>Imaginary part</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L51">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-imaginary?"></span>
</section>
<section id="imaginary" class="level4">
<h4 class="anchored" data-anchor-id="imaginary">imaginary?</h4>
<ul>
<li><code>(imaginary? z)</code></li>
</ul>
<p>Is z is a pure imaginary number?</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L54">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-inf?"></span>
</section>
<section id="inf" class="level4">
<h4 class="anchored" data-anchor-id="inf">inf?</h4>
<ul>
<li><code>(inf? z)</code></li>
</ul>
<p>Is infinite?</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L56">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-invalid?"></span>
</section>
<section id="invalid" class="level4">
<h4 class="anchored" data-anchor-id="invalid">invalid?</h4>
<ul>
<li><code>(invalid? z)</code></li>
</ul>
<p>Is NaN or Inf?</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L60">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-log"></span>
</section>
<section id="log" class="level4">
<h4 class="anchored" data-anchor-id="log">log</h4>
<ul>
<li><code>(log z)</code></li>
</ul>
<p>log(z), principal value</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L232">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-logb"></span>
</section>
<section id="logb" class="level4">
<h4 class="anchored" data-anchor-id="logb">logb</h4>
<ul>
<li><code>(logb z b)</code></li>
</ul>
<p>log with base b</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L248">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-muladd"></span>
</section>
<section id="muladd" class="level4">
<h4 class="anchored" data-anchor-id="muladd">muladd</h4>
<ul>
<li><code>(muladd x y z)</code></li>
</ul>
<p>(+ z (* x y))</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L148">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-mult"></span>
</section>
<section id="mult" class="level4">
<h4 class="anchored" data-anchor-id="mult">mult</h4>
<ul>
<li><code>(mult z1 z2)</code></li>
</ul>
<p>Multiplication of two complex numbers.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L130">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-mult-I"></span>
</section>
<section id="mult-i" class="level4">
<h4 class="anchored" data-anchor-id="mult-i">mult-I</h4>
<ul>
<li><code>(mult-I z)</code></li>
</ul>
<p>Multiplication by 0+i.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L140">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-mult-I-"></span>
</section>
<section id="mult-i-" class="level4">
<h4 class="anchored" data-anchor-id="mult-i-">mult-I-</h4>
<ul>
<li><code>(mult-I- z)</code></li>
</ul>
<p>Multiplication by 0-i.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L144">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-nan?"></span>
</section>
<section id="nan" class="level4">
<h4 class="anchored" data-anchor-id="nan">nan?</h4>
<ul>
<li><code>(nan? z)</code></li>
</ul>
<p>Is NaN?</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L58">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-neg"></span>
</section>
<section id="neg" class="level4">
<h4 class="anchored" data-anchor-id="neg">neg</h4>
<ul>
<li><code>(neg z)</code></li>
</ul>
<p>Negation of the complex number, -z.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L191">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-norm"></span>
</section>
<section id="norm" class="level4">
<h4 class="anchored" data-anchor-id="norm">norm</h4>
<ul>
<li><code>(norm z)</code></li>
</ul>
<p>Calculates the squared magnitude (norm) of the complex number <code>z</code>.</p>
<p>Also known as the squared modulus or squared Euclidean norm.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L89">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-normalize"></span>
</section>
<section id="normalize" class="level4">
<h4 class="anchored" data-anchor-id="normalize">normalize</h4>
<ul>
<li><code>(normalize z)</code></li>
</ul>
<p>Normalize complex number to make abs(z) = 1</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L98">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-pow"></span>
</section>
<section id="pow" class="level4">
<h4 class="anchored" data-anchor-id="pow">pow</h4>
<ul>
<li><code>(pow z1 z2)</code></li>
</ul>
<p>Complex power, z^z</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L353">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-re"></span>
</section>
<section id="re" class="level4">
<h4 class="anchored" data-anchor-id="re">re</h4>
<ul>
<li><code>(re z)</code></li>
</ul>
<p>Real part</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L50">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-real?"></span>
</section>
<section id="real" class="level4">
<h4 class="anchored" data-anchor-id="real">real?</h4>
<ul>
<li><code>(real? z)</code></li>
</ul>
<p>Is z is a real number?</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L53">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-reciprocal"></span>
</section>
<section id="reciprocal" class="level4">
<h4 class="anchored" data-anchor-id="reciprocal">reciprocal</h4>
<ul>
<li><code>(reciprocal z)</code></li>
</ul>
<p>Reciprocal, 1/z.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L177">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-scale"></span>
</section>
<section id="scale" class="level4">
<h4 class="anchored" data-anchor-id="scale">scale</h4>
<ul>
<li><code>(scale z v)</code></li>
</ul>
<p>Multiplication by real number</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L124">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-sec"></span>
</section>
<section id="sec" class="level4">
<h4 class="anchored" data-anchor-id="sec">sec</h4>
<ul>
<li><code>(sec z)</code></li>
</ul>
<p>sec(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L420">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-sech"></span>
</section>
<section id="sech" class="level4">
<h4 class="anchored" data-anchor-id="sech">sech</h4>
<ul>
<li><code>(sech z)</code></li>
</ul>
<p>sech(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L500">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-sin"></span>
</section>
<section id="sin" class="level4">
<h4 class="anchored" data-anchor-id="sin">sin</h4>
<ul>
<li><code>(sin z)</code></li>
</ul>
<p>sin(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L383">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-sinh"></span>
</section>
<section id="sinh" class="level4">
<h4 class="anchored" data-anchor-id="sinh">sinh</h4>
<ul>
<li><code>(sinh z)</code></li>
</ul>
<p>sinh(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L464">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-sq"></span>
</section>
<section id="sq" class="level4">
<h4 class="anchored" data-anchor-id="sq">sq</h4>
<ul>
<li><code>(sq z)</code></li>
</ul>
<p>Square of the complex number.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L153">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-sqrt"></span>
</section>
<section id="sqrt" class="level4">
<h4 class="anchored" data-anchor-id="sqrt">sqrt</h4>
<ul>
<li><code>(sqrt z)</code></li>
</ul>
<p>Sqrt of the complex number, sqrt(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L196">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-sqrt1z"></span>
</section>
<section id="sqrt1z" class="level4">
<h4 class="anchored" data-anchor-id="sqrt1z">sqrt1z</h4>
<ul>
<li><code>(sqrt1z z)</code></li>
</ul>
<p>sqrt(1-z^2)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L208">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-sub"></span>
</section>
<section id="sub" class="level4">
<h4 class="anchored" data-anchor-id="sub">sub</h4>
<ul>
<li><code>(sub z1 z2)</code></li>
</ul>
<p>Difference of two complex numbers.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L118">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-tan"></span>
</section>
<section id="tan" class="level4">
<h4 class="anchored" data-anchor-id="tan">tan</h4>
<ul>
<li><code>(tan z)</code></li>
</ul>
<p>tan(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L406">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-tanh"></span>
</section>
<section id="tanh" class="level4">
<h4 class="anchored" data-anchor-id="tanh">tanh</h4>
<ul>
<li><code>(tanh z)</code></li>
</ul>
<p>tanh(z)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L486">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-valid?"></span>
</section>
<section id="valid" class="level4">
<h4 class="anchored" data-anchor-id="valid">valid?</h4>
<ul>
<li><code>(valid? z)</code></li>
</ul>
<p>Is valid complex (not NaN or Inf)?</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L61">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-zero?"></span>
</section>
<section id="zero-1" class="level4">
<h4 class="anchored" data-anchor-id="zero-1">zero?</h4>
<ul>
<li><code>(zero? z)</code></li>
</ul>
<p>Is zero?</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/complex.clj#L55">source</a></small><hr style="margin: 0"></div>
</section>
</section>
<section id="fastmath.quaternion" class="level3">
<h3 class="anchored" data-anchor-id="fastmath.quaternion">fastmath.quaternion</h3>
<p>Operations for quaternions.</p>
<p>Quaternions extend complex numbers and are widely used in fields like 3D graphics and physics for representing rotations.</p>
<p>In <code>fastmath</code>, quaternions are represented as 4-dimensional vectors (<a href="#LOS-Vec4">Vec4</a>) where the components correspond to the scalar part and the three imaginary parts (<span class="math inline">\(i\)</span>, <span class="math inline">\(j\)</span>, <span class="math inline">\(k\)</span>): <span class="math inline">\(q = a + bi + cj + dk\)</span> is <code>(Vec4. a b c d)</code>.</p>
<p>The namespace provides functions for creating quaternions, accessing scalar and vector parts, predicates (e.g., <a href="#LOS-real?">real?</a>, <a href="#LOS-zero?">zero?</a>, <a href="#LOS-inf?">inf?</a>, <a href="#LOS-nan?">nan?</a>), and fundamental properties (magnitude, argument, normalization).</p>
<p>A comprehensive set of operations is included: - <strong>Arithmetic:</strong> Addition, subtraction, multiplication, division, negation, square, reciprocal, scaling, conjugation. - <strong>Transcendental Functions:</strong> Extensions of standard complex functions like exponential, logarithm, power, trigonometric, hyperbolic functions, and their inverses. - <strong>Rotations:</strong> Functions for creating rotation quaternions, rotating 3D vectors (<a href="#LOS-rotate">rotate</a>), spherical linear interpolation (SLERP), and conversions between quaternions, Euler angles (ZYX body 3-2-1 and z-yâ€™-xâ€™â€™), and rotation matrices.</p>
<p>The implementation correctly handles floating-point special values, including <code>##Inf</code> and <code>##NaN</code>.</p>
<span id="#LOS--I"></span>
<section id="i-2" class="level4">
<h4 class="anchored" data-anchor-id="i-2">-I</h4>
<p>0-1i+0j+0k</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L34">source</a></small><hr style="margin: 0"></div>
<span id="#LOS--J"></span>
</section>
<section id="j" class="level4">
<h4 class="anchored" data-anchor-id="j">-J</h4>
<p>0+0i-1j+0k</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L35">source</a></small><hr style="margin: 0"></div>
<span id="#LOS--K"></span>
</section>
<section id="k" class="level4">
<h4 class="anchored" data-anchor-id="k">-K</h4>
<p>0+0i+0j-1k</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L36">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-I"></span>
</section>
<section id="i-3" class="level4">
<h4 class="anchored" data-anchor-id="i-3">I</h4>
<p>0+1i+0j+0k</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L31">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-J"></span>
</section>
<section id="j-1" class="level4">
<h4 class="anchored" data-anchor-id="j-1">J</h4>
<p>0+0i+1j+0k</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L32">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-K"></span>
</section>
<section id="k-1" class="level4">
<h4 class="anchored" data-anchor-id="k-1">K</h4>
<p>0+0i+0j+1k</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L33">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-ONE"></span>
</section>
<section id="one-1" class="level4">
<h4 class="anchored" data-anchor-id="one-1">ONE</h4>
<p>1+0i+0j+0k</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L30">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-ZERO"></span>
</section>
<section id="zero-2" class="level4">
<h4 class="anchored" data-anchor-id="zero-2">ZERO</h4>
<p>0+0i+0j+0k</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L29">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-acos"></span>
</section>
<section id="acos-1" class="level4">
<h4 class="anchored" data-anchor-id="acos-1">acos</h4>
<ul>
<li><code>(acos q)</code></li>
</ul>
<p>acos(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L440">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-acosh"></span>
</section>
<section id="acosh-1" class="level4">
<h4 class="anchored" data-anchor-id="acosh-1">acosh</h4>
<ul>
<li><code>(acosh q)</code></li>
</ul>
<p>acosh(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L446">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-acot"></span>
</section>
<section id="acot-1" class="level4">
<h4 class="anchored" data-anchor-id="acot-1">acot</h4>
<ul>
<li><code>(acot q)</code></li>
</ul>
<p>acot(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L444">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-acoth"></span>
</section>
<section id="acoth-1" class="level4">
<h4 class="anchored" data-anchor-id="acoth-1">acoth</h4>
<ul>
<li><code>(acoth q)</code></li>
</ul>
<p>acoth(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L450">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-acsc"></span>
</section>
<section id="acsc-1" class="level4">
<h4 class="anchored" data-anchor-id="acsc-1">acsc</h4>
<ul>
<li><code>(acsc q)</code></li>
</ul>
<p>acsc(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L443">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-acsch"></span>
</section>
<section id="acsch-1" class="level4">
<h4 class="anchored" data-anchor-id="acsch-1">acsch</h4>
<ul>
<li><code>(acsch q)</code></li>
</ul>
<p>acsch(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L449">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-add"></span>
</section>
<section id="add-1" class="level4">
<h4 class="anchored" data-anchor-id="add-1">add</h4>
<ul>
<li><code>(add q1 q2)</code></li>
</ul>
<p>Sum of two quaternions</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L110">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-adds"></span>
</section>
<section id="adds-1" class="level4">
<h4 class="anchored" data-anchor-id="adds-1">adds</h4>
<ul>
<li><code>(adds q1 s)</code></li>
</ul>
<p>Adds scalar to a quaternion</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L114">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-arg"></span>
</section>
<section id="arg-1" class="level4">
<h4 class="anchored" data-anchor-id="arg-1">arg</h4>
<ul>
<li><code>(arg quaternion)</code></li>
</ul>
<p>Argument of quaternion, atan2(|vector(q)|, re(q))</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L97">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-asec"></span>
</section>
<section id="asec-1" class="level4">
<h4 class="anchored" data-anchor-id="asec-1">asec</h4>
<ul>
<li><code>(asec q)</code></li>
</ul>
<p>asec(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L442">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-asech"></span>
</section>
<section id="asech-1" class="level4">
<h4 class="anchored" data-anchor-id="asech-1">asech</h4>
<ul>
<li><code>(asech q)</code></li>
</ul>
<p>asech(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L448">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-asin"></span>
</section>
<section id="asin-1" class="level4">
<h4 class="anchored" data-anchor-id="asin-1">asin</h4>
<ul>
<li><code>(asin q)</code></li>
</ul>
<p>asin(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L439">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-asinh"></span>
</section>
<section id="asinh-1" class="level4">
<h4 class="anchored" data-anchor-id="asinh-1">asinh</h4>
<ul>
<li><code>(asinh q)</code></li>
</ul>
<p>asinh(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L445">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-atan"></span>
</section>
<section id="atan-1" class="level4">
<h4 class="anchored" data-anchor-id="atan-1">atan</h4>
<ul>
<li><code>(atan q)</code></li>
</ul>
<p>atan(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L441">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-atanh"></span>
</section>
<section id="atanh-1" class="level4">
<h4 class="anchored" data-anchor-id="atanh-1">atanh</h4>
<ul>
<li><code>(atanh q)</code></li>
</ul>
<p>atanh(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L447">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-complex->quaternion"></span>
</section>
<section id="complex-quaternion" class="level4">
<h4 class="anchored" data-anchor-id="complex-quaternion">complex-&gt;quaternion</h4>
<ul>
<li><code>(complex-&gt;quaternion z)</code></li>
</ul>
<p>Create quaternion from complex number</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L44">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-conjugate"></span>
</section>
<section id="conjugate-1" class="level4">
<h4 class="anchored" data-anchor-id="conjugate-1">conjugate</h4>
<ul>
<li><code>(conjugate quaternion)</code></li>
</ul>
<p>Conjugate of the quaternion</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L126">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-cos"></span>
</section>
<section id="cos-1" class="level4">
<h4 class="anchored" data-anchor-id="cos-1">cos</h4>
<ul>
<li><code>(cos q)</code></li>
</ul>
<p>cos(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L428">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-cosh"></span>
</section>
<section id="cosh-1" class="level4">
<h4 class="anchored" data-anchor-id="cosh-1">cosh</h4>
<ul>
<li><code>(cosh q)</code></li>
</ul>
<p>cosh(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L434">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-cot"></span>
</section>
<section id="cot-1" class="level4">
<h4 class="anchored" data-anchor-id="cot-1">cot</h4>
<ul>
<li><code>(cot q)</code></li>
</ul>
<p>cot(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L432">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-coth"></span>
</section>
<section id="coth-1" class="level4">
<h4 class="anchored" data-anchor-id="coth-1">coth</h4>
<ul>
<li><code>(coth q)</code></li>
</ul>
<p>coth(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L438">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-csc"></span>
</section>
<section id="csc-1" class="level4">
<h4 class="anchored" data-anchor-id="csc-1">csc</h4>
<ul>
<li><code>(csc q)</code></li>
</ul>
<p>csc(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L431">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-csch"></span>
</section>
<section id="csch-1" class="level4">
<h4 class="anchored" data-anchor-id="csch-1">csch</h4>
<ul>
<li><code>(csch q)</code></li>
</ul>
<p>csch(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L437">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-delta-eq"></span>
</section>
<section id="delta-eq-1" class="level4">
<h4 class="anchored" data-anchor-id="delta-eq-1">delta-eq</h4>
<ul>
<li><code>(delta-eq q1 q2)</code></li>
<li><code>(delta-eq q1 q2 accuracy)</code></li>
</ul>
<p>Compare quaternions with given accuracy (10e-6 by default)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L90">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-div"></span>
</section>
<section id="div-1" class="level4">
<h4 class="anchored" data-anchor-id="div-1">div</h4>
<ul>
<li><code>(div q1 q2)</code></li>
</ul>
<p>Division two quaternions</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L151">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-ensure-quaternion"></span>
</section>
<section id="ensure-quaternion" class="level4">
<h4 class="anchored" data-anchor-id="ensure-quaternion">ensure-quaternion</h4>
<ul>
<li><code>(ensure-quaternion q)</code></li>
</ul>
<p>Convert possible number, complex number to a quaternion</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L49">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-exp"></span>
</section>
<section id="exp-1" class="level4">
<h4 class="anchored" data-anchor-id="exp-1">exp</h4>
<ul>
<li><code>(exp q)</code></li>
</ul>
<p>exp(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L208">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-from-angles"></span>
</section>
<section id="from-angles" class="level4">
<h4 class="anchored" data-anchor-id="from-angles">from-angles</h4>
<ul>
<li><code>(from-angles [x y z])</code></li>
<li><code>(from-angles x y z)</code></li>
</ul>
<p>Converts Taitâ€“Bryan angles (z-yâ€²-xâ€™â€™ intrinsic rotation sequence) to a quaternion.</p>
<p>The angles <code>[x y z]</code> correspond to rotations around the local (body) x-axis, followed by the intermediate local yâ€™-axis, and finally the local zâ€™â€™-axis.</p>
<p>Parameters:</p>
<ul>
<li><code>x</code>: Rotation around the x-axis (radians).</li>
<li><code>y</code>: Rotation around the yâ€™-axis (radians).</li>
<li><code>z</code>: Rotation around the zâ€™â€™-axis (radians).</li>
</ul>
<p>Can accept individual double values or a <code>Vec3</code> containing <code>[x y z]</code>.</p>
<p>Returns A quaternion <code>Vec4</code> representing the rotation.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L349">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-from-euler"></span>
</section>
<section id="from-euler" class="level4">
<h4 class="anchored" data-anchor-id="from-euler">from-euler</h4>
<ul>
<li><code>(from-euler [roll pitch yaw])</code></li>
<li><code>(from-euler roll pitch yaw)</code></li>
</ul>
<p>Converts Euler angles (ZYX body 3-2-1 convention) to a quaternion.</p>
<p>The rotation sequence is intrinsic Z-Yâ€™-Xâ€™â€™ (yaw, pitch, roll), applied to the body frame. The order of input parameters or vector components is [roll pitch yaw].</p>
<p>Parameters:</p>
<ul>
<li><code>roll</code>: Rotation around the x-axis (radians), expected range <code>[-pi, pi]</code>.</li>
<li><code>pitch</code>: Rotation around the yâ€™-axis (radians), expected range <code>[-pi/2, pi/2]</code>.</li>
<li><code>yaw</code>: Rotation around the zâ€™â€™-axis (radians), expected range <code>[-pi, pi]</code>.</li>
</ul>
<p>Can accept individual double values or a <code>Vec3</code> containing [roll pitch yaw].</p>
<p>Returns A quaternion <code>Vec4</code> representing the rotation.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L296">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-from-rotation-matrix"></span>
</section>
<section id="from-rotation-matrix" class="level4">
<h4 class="anchored" data-anchor-id="from-rotation-matrix">from-rotation-matrix</h4>
<ul>
<li><code>(from-rotation-matrix m)</code></li>
</ul>
<p>Converts a 3x3 rotation matrix to a quaternion.</p>
<p>Takes a <a href="#LOS-Mat3x3">Mat3x3</a> rotation matrix as input. Returns a <a href="#LOS-Vec4">Vec4</a> representing the quaternion that represents the same rotation.</p>
<p>The resulting quaternion is a unit quaternion if the input matrix is a valid rotation matrix. The method handles numerical stability and normalization.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L401">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-im-i"></span>
</section>
<section id="im-i" class="level4">
<h4 class="anchored" data-anchor-id="im-i">im-i</h4>
<ul>
<li><code>(im-i quaternion)</code></li>
</ul>
<p>Return i imaginary part</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L71">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-im-j"></span>
</section>
<section id="im-j" class="level4">
<h4 class="anchored" data-anchor-id="im-j">im-j</h4>
<ul>
<li><code>(im-j quaternion)</code></li>
</ul>
<p>Return j imaginary part</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L72">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-im-k"></span>
</section>
<section id="im-k" class="level4">
<h4 class="anchored" data-anchor-id="im-k">im-k</h4>
<ul>
<li><code>(im-k quaternion)</code></li>
</ul>
<p>Return k imaginary part</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L73">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-imaginary?"></span>
</section>
<section id="imaginary-1" class="level4">
<h4 class="anchored" data-anchor-id="imaginary-1">imaginary?</h4>
<ul>
<li><code>(imaginary? quaternion)</code></li>
</ul>
<p>Is q is a pure imaginary number?</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L76">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-inf?"></span>
</section>
<section id="inf-1" class="level4">
<h4 class="anchored" data-anchor-id="inf-1">inf?</h4>
<ul>
<li><code>(inf? quaternion)</code></li>
</ul>
<p>Is infinitive?</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L78">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-invalid?"></span>
</section>
<section id="invalid-1" class="level4">
<h4 class="anchored" data-anchor-id="invalid-1">invalid?</h4>
<ul>
<li><code>(invalid? z)</code></li>
</ul>
<p>Is NaN or Inf?</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L86">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-log"></span>
</section>
<section id="log-1" class="level4">
<h4 class="anchored" data-anchor-id="log-1">log</h4>
<ul>
<li><code>(log q)</code></li>
</ul>
<p>log(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L209">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-logb"></span>
</section>
<section id="logb-1" class="level4">
<h4 class="anchored" data-anchor-id="logb-1">logb</h4>
<ul>
<li><code>(logb quaternion b)</code></li>
</ul>
<p>log with base b</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L211">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-mult"></span>
</section>
<section id="mult-1" class="level4">
<h4 class="anchored" data-anchor-id="mult-1">mult</h4>
<ul>
<li><code>(mult q1 q2)</code></li>
</ul>
<p>Multiplication of two quaternions.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L139">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-nan?"></span>
</section>
<section id="nan-1" class="level4">
<h4 class="anchored" data-anchor-id="nan-1">nan?</h4>
<ul>
<li><code>(nan? quaternion)</code></li>
</ul>
<p>Is NaN?</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L82">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-neg"></span>
</section>
<section id="neg-1" class="level4">
<h4 class="anchored" data-anchor-id="neg-1">neg</h4>
<ul>
<li><code>(neg quaternion)</code></li>
</ul>
<p>Negation of the quaternion.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L156">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-norm"></span>
</section>
<section id="norm-1" class="level4">
<h4 class="anchored" data-anchor-id="norm-1">norm</h4>
<ul>
<li><code>(norm quaternion)</code></li>
</ul>
<p>Norm of the quaternion, length of the vector</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L102">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-normalize"></span>
</section>
<section id="normalize-1" class="level4">
<h4 class="anchored" data-anchor-id="normalize-1">normalize</h4>
<ul>
<li><code>(normalize quaternion)</code></li>
</ul>
<p>Normalize quaternion, unit of quaternion.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L106">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-pow"></span>
</section>
<section id="pow-1" class="level4">
<h4 class="anchored" data-anchor-id="pow-1">pow</h4>
<ul>
<li><code>(pow q p)</code></li>
</ul>
<p>Quaternion power</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L216">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-qsgn"></span>
</section>
<section id="qsgn" class="level4">
<h4 class="anchored" data-anchor-id="qsgn">qsgn</h4>
<ul>
<li><code>(qsgn re im-i im-j im-k)</code></li>
<li><code>(qsgn q)</code></li>
</ul>
<p>Computes the signum of a quaternion.</p>
<p>Returns <code>0.0</code> for the zero quaternion (<span class="math inline">\(0+0i+0j+0k\)</span>). For any other quaternion, returns the sign of its scalar part.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L173">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-quaternion"></span>
</section>
<section id="quaternion" class="level4">
<h4 class="anchored" data-anchor-id="quaternion">quaternion</h4>
<ul>
<li><code>(quaternion a b c d)</code></li>
<li><code>(quaternion scalar [i j k])</code></li>
<li><code>(quaternion a)</code></li>
</ul>
<p>Create quaternion from individual values or scalar and vector parts, reprezented as <code>Vec4</code>.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L38">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-re"></span>
</section>
<section id="re-1" class="level4">
<h4 class="anchored" data-anchor-id="re-1">re</h4>
<ul>
<li><code>(re quaternion)</code></li>
</ul>
<p>Returns scalar part of quaternion</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L61">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-real?"></span>
</section>
<section id="real-1" class="level4">
<h4 class="anchored" data-anchor-id="real-1">real?</h4>
<ul>
<li><code>(real? quaternion)</code></li>
</ul>
<p>Is q is a real number?</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L75">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-reciprocal"></span>
</section>
<section id="reciprocal-1" class="level4">
<h4 class="anchored" data-anchor-id="reciprocal-1">reciprocal</h4>
<ul>
<li><code>(reciprocal quaternion)</code></li>
</ul>
<p>Reciprocal of the quaternion</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L134">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-rotate"></span>
</section>
<section id="rotate" class="level4">
<h4 class="anchored" data-anchor-id="rotate">rotate</h4>
<ul>
<li><code>(rotate in rotq)</code></li>
<li><code>(rotate in angle u)</code></li>
</ul>
<p>Rotate 3d <code>in</code> vector around axis <code>u</code>, the same as <code>fastmath.vector/axis-rotate</code>.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L239">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-rotation-quaternion"></span>
</section>
<section id="rotation-quaternion" class="level4">
<h4 class="anchored" data-anchor-id="rotation-quaternion">rotation-quaternion</h4>
<ul>
<li><code>(rotation-quaternion angle u)</code></li>
</ul>
<p>Creates a unit quaternion representing a rotation.</p>
<p>The rotation is defined by an <code>angle</code> (in radians) and a 3D vector <code>u</code> specifying the axis of rotation. The axis vector <code>u</code> is normalized internally to ensure a unit quaternion result.</p>
<p>Parameters:</p>
<ul>
<li><code>angle</code>: The rotation angle in radians (double).</li>
<li><code>u</code>: The axis of rotation (Vec3). It will be normalized before use.</li>
</ul>
<p>Returns A unit quaternion (Vec4) representing the rotation.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L221">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-scalar"></span>
</section>
<section id="scalar" class="level4">
<h4 class="anchored" data-anchor-id="scalar">scalar</h4>
<ul>
<li><code>(scalar quaternion)</code></li>
</ul>
<p>Returns scalar part of quaternion, double</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L57">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-scale"></span>
</section>
<section id="scale-1" class="level4">
<h4 class="anchored" data-anchor-id="scale-1">scale</h4>
<ul>
<li><code>(scale quaternion scale)</code></li>
</ul>
<p>Scale the quaternion</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L122">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-sec"></span>
</section>
<section id="sec-1" class="level4">
<h4 class="anchored" data-anchor-id="sec-1">sec</h4>
<ul>
<li><code>(sec q)</code></li>
</ul>
<p>sec(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L430">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-sech"></span>
</section>
<section id="sech-1" class="level4">
<h4 class="anchored" data-anchor-id="sech-1">sech</h4>
<ul>
<li><code>(sech q)</code></li>
</ul>
<p>sech(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L436">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-sin"></span>
</section>
<section id="sin-1" class="level4">
<h4 class="anchored" data-anchor-id="sin-1">sin</h4>
<ul>
<li><code>(sin q)</code></li>
</ul>
<p>sin(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L427">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-sinh"></span>
</section>
<section id="sinh-1" class="level4">
<h4 class="anchored" data-anchor-id="sinh-1">sinh</h4>
<ul>
<li><code>(sinh q)</code></li>
</ul>
<p>sinh(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L433">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-slerp"></span>
</section>
<section id="slerp-1" class="level4">
<h4 class="anchored" data-anchor-id="slerp-1">slerp</h4>
<ul>
<li><code>(slerp q1 q2 t)</code></li>
</ul>
<p>Performs Spherical Linear Interpolation (SLERP) between two quaternions.</p>
<p>SLERP interpolates along the shortest arc on the unit sphere, providing smooth interpolation between rotations represented by unit quaternions.</p>
<p>Parameters:</p>
<ul>
<li><code>q1</code>: The starting quaternion (Vec4).</li>
<li><code>q2</code>: The ending quaternion (Vec4).</li>
<li><code>t</code>: The interpolation parameter (double). Should be in the range [0.0, 1.0].
<ul>
<li>If <code>t=0.0</code>, returns <code>q1</code>.</li>
<li>If <code>t=1.0</code>, returns <code>q2</code>.</li>
<li>For <code>0.0 &lt; t &lt; 1.0</code>, returns an interpolated quaternion. The parameter <code>t</code> is internally constrained to [0.0, 1.0].</li>
</ul></li>
</ul>
<p>Note: This function is typically used with unit quaternions for rotation interpolation.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L250">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-sq"></span>
</section>
<section id="sq-1" class="level4">
<h4 class="anchored" data-anchor-id="sq-1">sq</h4>
<ul>
<li><code>(sq quaternion)</code></li>
</ul>
<p>Square of the quaternion.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L160">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-sqrt"></span>
</section>
<section id="sqrt-1" class="level4">
<h4 class="anchored" data-anchor-id="sqrt-1">sqrt</h4>
<ul>
<li><code>(sqrt q)</code></li>
</ul>
<p>sqrt(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L207">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-sub"></span>
</section>
<section id="sub-1" class="level4">
<h4 class="anchored" data-anchor-id="sub-1">sub</h4>
<ul>
<li><code>(sub q1 q2)</code></li>
</ul>
<p>Difference of two quaternions</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L118">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-tan"></span>
</section>
<section id="tan-1" class="level4">
<h4 class="anchored" data-anchor-id="tan-1">tan</h4>
<ul>
<li><code>(tan q)</code></li>
</ul>
<p>tan(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L429">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-tanh"></span>
</section>
<section id="tanh-1" class="level4">
<h4 class="anchored" data-anchor-id="tanh-1">tanh</h4>
<ul>
<li><code>(tanh q)</code></li>
</ul>
<p>tanh(q)</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L435">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-to-angles"></span>
</section>
<section id="to-angles" class="level4">
<h4 class="anchored" data-anchor-id="to-angles">to-angles</h4>
<ul>
<li><code>(to-angles q)</code></li>
</ul>
<p>Converts a quaternion <code>q</code> to Taitâ€“Bryan angles using the z-yâ€²-xâ€™â€™ intrinsic rotation sequence. The input quaternion is normalized before calculation. Returns a <code>Vec3</code> representing the angles <code>[x y z]</code>. These angles correspond to rotations around the local (body) x-axis, followed by the intermediate local yâ€™-axis, and finally the local zâ€™â€™-axis. Output angles are typically in the range <code>[-pi, pi]</code> for x and z, and <code>[-pi/2, pi/2]</code> for y.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L329">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-to-euler"></span>
</section>
<section id="to-euler" class="level4">
<h4 class="anchored" data-anchor-id="to-euler">to-euler</h4>
<ul>
<li><code>(to-euler q)</code></li>
</ul>
<p>Converts a quaternion <code>q</code> to ZYX (body 3-2-1) Euler angles. The input quaternion is normalized before calculation. Returns a <code>Vec3</code> representing the angles <code>[roll pitch yaw]</code>. Roll is the angle around the x-axis, pitch around the yâ€™-axis, and yaw around the zâ€™â€™-axis. Output angles are typically in [-pi, pi] for roll/yaw and [-pi/2, pi/2] for pitch.</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L276">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-to-rotation-matrix"></span>
</section>
<section id="to-rotation-matrix" class="level4">
<h4 class="anchored" data-anchor-id="to-rotation-matrix">to-rotation-matrix</h4>
<ul>
<li><code>(to-rotation-matrix q)</code></li>
</ul>
<p>Converts a quaternion to a 3x3 rotation matrix.</p>
<p>The input quaternion is normalized internally to ensure a valid rotation matrix. Unit quaternions are used to represent rotations.</p>
<p>Parameters:</p>
<ul>
<li><code>q</code>: The quaternion (Vec4) to convert.</li>
</ul>
<p>Returns A 3x3 rotation matrix (Mat3x3).</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L379">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-valid?"></span>
</section>
<section id="valid-1" class="level4">
<h4 class="anchored" data-anchor-id="valid-1">valid?</h4>
<ul>
<li><code>(valid? z)</code></li>
</ul>
<p>Is valid complex (not NaN or Inf)?</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L87">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-vector"></span>
</section>
<section id="vector" class="level4">
<h4 class="anchored" data-anchor-id="vector">vector</h4>
<ul>
<li><code>(vector quaternion)</code></li>
</ul>
<p>Returns vector part of quaternion, <code>Vec3</code> type</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L65">source</a></small><hr style="margin: 0"></div>
<span id="#LOS-zero?"></span>
</section>
<section id="zero-3" class="level4">
<h4 class="anchored" data-anchor-id="zero-3">zero?</h4>
<ul>
<li><code>(zero? quaternion)</code></li>
</ul>
<p>Is zero?</p>
<div style="text-align: right"><small><a href="https://github.com/generateme/fastmath/tree/3.x/src/fastmath/quaternion.clj#L77">source</a></small><hr style="margin: 0"></div>
<div style="background-color:grey;height:2px;width:100%;"></div>
<div><pre><small><small>source: <a href="https://github.com/generateme/fastmath//blob/master/clay/complex_quaternions.clj">clay/complex_quaternions.clj</a></small></small></pre></div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./vector_matrix.html" class="pagination-link" aria-label="Vectors and matrices">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Vectors and matrices</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./random.html" class="pagination-link" aria-label="Random">
        <span class="nav-page-text">Random</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>